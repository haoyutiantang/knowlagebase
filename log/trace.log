2021-08-27 15:16:19.384 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2021-08-27 15:16:19.392 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :55   [32m                  [0;39m Starting KnowlagebaseApplication using Java 1.8.0_261 on DESKTOP-CTIIJC1 with PID 4244 (E:\code\java\knowlagebase\target\classes started by MECHREVO in E:\code\java\knowlagebase)
2021-08-27 15:16:19.392 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-08-27 15:16:19.439 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-08-27 15:16:19.439 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-08-27 15:16:20.273 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-08-27 15:16:20.276 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-08-27 15:16:20.294 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2021-08-27 15:16:20.900 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-08-27 15:16:20.906 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-08-27 15:16:20.907 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-08-27 15:16:20.907 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2021-08-27 15:16:20.966 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-08-27 15:16:20.966 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 1527 ms
2021-08-27 15:16:21.731 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-08-27 15:16:22.018 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-08-27 15:16:22.055 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-08-27 15:16:22.073 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-08-27 15:16:22.085 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-08-27 15:16:22.096 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :61   [32m                  [0;39m Started KnowlagebaseApplication in 3.142 seconds (JVM running for 4.363)
2021-08-27 15:16:22.098 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :28   [32m                  [0;39m 启动成功！
2021-08-27 15:16:22.098 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :29   [32m                  [0;39m 地址：	http://127.0.0.1:8880
2021-08-27 15:16:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86358139900923904 [0;39m 生成今日电子书快照开始
2021-08-27 15:16:25.023 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m86358139900923904 [0;39m HikariPool-1 - Starting...
2021-08-27 15:16:25.849 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m86358139900923904 [0;39m HikariPool-1 - Start completed.
2021-08-27 15:16:25.855 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86358139900923904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 15:16:25.870 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86358139900923904 [0;39m ==> Parameters: 
2021-08-27 15:16:25.935 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86358139900923904 [0;39m <==    Updates: 7
2021-08-27 15:16:25.936 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86358139900923904 [0;39m 生成今日电子书快照结束，耗时：927毫秒
2021-08-27 16:09:19.458 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :55   [32m                  [0;39m Starting KnowlagebaseApplication using Java 1.8.0_261 on DESKTOP-CTIIJC1 with PID 15256 (E:\code\java\knowlagebase\target\classes started by MECHREVO in E:\code\java\knowlagebase)
2021-08-27 16:09:19.455 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2021-08-27 16:09:19.459 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2021-08-27 16:09:19.492 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-08-27 16:09:19.493 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-08-27 16:09:19.902 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2021-08-27 16:09:19.903 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-08-27 16:09:19.915 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2021-08-27 16:09:20.390 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2021-08-27 16:09:20.396 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2021-08-27 16:09:20.396 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2021-08-27 16:09:20.396 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2021-08-27 16:09:20.446 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2021-08-27 16:09:20.446 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 953 ms
2021-08-27 16:09:21.057 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2021-08-27 16:09:21.328 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2021-08-27 16:09:21.364 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2021-08-27 16:09:21.381 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2021-08-27 16:09:21.392 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2021-08-27 16:09:21.402 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :61   [32m                  [0;39m Started KnowlagebaseApplication in 2.286 seconds (JVM running for 3.24)
2021-08-27 16:09:21.403 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :28   [32m                  [0;39m 启动成功！
2021-08-27 16:09:21.404 INFO  c.h.knowlagebase.config.KnowlagebaseApplication   :29   [32m                  [0;39m 地址：	http://127.0.0.1:8880
2021-08-27 16:09:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371477787643904 [0;39m 生成今日电子书快照开始
2021-08-27 16:09:25.019 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m86371477787643904 [0;39m HikariPool-1 - Starting...
2021-08-27 16:09:25.627 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m86371477787643904 [0;39m HikariPool-1 - Start completed.
2021-08-27 16:09:25.633 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371477787643904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:09:25.649 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371477787643904 [0;39m ==> Parameters: 
2021-08-27 16:09:25.654 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371477787643904 [0;39m <==    Updates: 0
2021-08-27 16:09:25.655 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371477787643904 [0;39m 生成今日电子书快照结束，耗时：646毫秒
2021-08-27 16:09:30.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371498733998080 [0;39m 生成今日电子书快照开始
2021-08-27 16:09:30.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371498733998080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:09:30.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371498733998080 [0;39m ==> Parameters: 
2021-08-27 16:09:30.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371498733998080 [0;39m <==    Updates: 0
2021-08-27 16:09:30.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371498733998080 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:09:35.001 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86371519697129472 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:09:35.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371519697129472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:09:35.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371519697129472 [0;39m ==> Parameters: 
2021-08-27 16:09:35.019 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371519697129472 [0;39m <==    Updates: 5
2021-08-27 16:09:35.020 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86371519697129472 [0;39m 更新电子书下的文档数据结束，耗时：19毫秒
2021-08-27 16:09:35.020 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371519776821248 [0;39m 生成今日电子书快照开始
2021-08-27 16:09:35.021 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371519776821248 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:09:35.021 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371519776821248 [0;39m ==> Parameters: 
2021-08-27 16:09:35.022 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371519776821248 [0;39m <==    Updates: 0
2021-08-27 16:09:35.023 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371519776821248 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:09:40.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371540723175424 [0;39m 生成今日电子书快照开始
2021-08-27 16:09:40.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371540723175424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:09:40.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371540723175424 [0;39m ==> Parameters: 
2021-08-27 16:09:40.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371540723175424 [0;39m <==    Updates: 0
2021-08-27 16:09:40.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371540723175424 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:09:45.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371561669529600 [0;39m 生成今日电子书快照开始
2021-08-27 16:09:45.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371561669529600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:09:45.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371561669529600 [0;39m ==> Parameters: 
2021-08-27 16:09:45.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371561669529600 [0;39m <==    Updates: 0
2021-08-27 16:09:45.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371561669529600 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:09:50.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371582641049600 [0;39m 生成今日电子书快照开始
2021-08-27 16:09:50.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371582641049600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:09:50.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371582641049600 [0;39m ==> Parameters: 
2021-08-27 16:09:50.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371582641049600 [0;39m <==    Updates: 0
2021-08-27 16:09:50.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371582641049600 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:09:55.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371603595792384 [0;39m 生成今日电子书快照开始
2021-08-27 16:09:55.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371603595792384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:09:55.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371603595792384 [0;39m ==> Parameters: 
2021-08-27 16:09:55.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371603595792384 [0;39m <==    Updates: 0
2021-08-27 16:09:55.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371603595792384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:10:00.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371624605061120 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:00.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371624605061120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:00.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371624605061120 [0;39m ==> Parameters: 
2021-08-27 16:10:00.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371624605061120 [0;39m <==    Updates: 0
2021-08-27 16:10:00.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371624605061120 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:10:05.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371645543026688 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:05.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371645543026688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:05.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371645543026688 [0;39m ==> Parameters: 
2021-08-27 16:10:05.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371645543026688 [0;39m <==    Updates: 0
2021-08-27 16:10:05.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371645543026688 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:10:05.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86371645555609600 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:10:05.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371645555609600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:10:05.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371645555609600 [0;39m ==> Parameters: 
2021-08-27 16:10:05.010 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371645555609600 [0;39m <==    Updates: 5
2021-08-27 16:10:05.011 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86371645555609600 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-27 16:10:10.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371666535518208 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:10.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371666535518208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371666535518208 [0;39m ==> Parameters: 
2021-08-27 16:10:10.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371666535518208 [0;39m <==    Updates: 0
2021-08-27 16:10:10.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371666535518208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:10:12.768 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-08-27 16:10:12.768 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2021-08-27 16:10:12.769 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2021-08-27 16:10:12.804 INFO  com.haoyu.knowlagebase.websocket.WebSocketServer  :33   [32m                  [0;39m 有新连接：token：3sIhLoIH6Q，session id：0，当前连接数：1
2021-08-27 16:10:12.907 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371678682222592 [0;39m ------------- 开始 -------------
2021-08-27 16:10:12.908 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371678682222592 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-08-27 16:10:12.908 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371678682222592 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.getStatistic
2021-08-27 16:10:12.908 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371678682222592 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:12.941 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371678829023232 [0;39m ------------- 开始 -------------
2021-08-27 16:10:12.942 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371678829023232 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-08-27 16:10:12.942 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371678829023232 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.get30Statistic
2021-08-27 16:10:12.942 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371678833217536 [0;39m ------------- 开始 -------------
2021-08-27 16:10:12.942 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371678829023232 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:12.942 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371678833217536 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:10:12.942 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371678833217536 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:10:12.943 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371678833217536 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:12.948 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371678833217536 [0;39m 请求参数: []
2021-08-27 16:10:12.948 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371678682222592 [0;39m 请求参数: []
2021-08-27 16:10:12.948 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371678829023232 [0;39m 请求参数: []
2021-08-27 16:10:12.956 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86371678829023232 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:10:12.956 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86371678682222592 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:10:12.957 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86371678829023232 [0;39m ==> Parameters: 
2021-08-27 16:10:12.957 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86371678682222592 [0;39m ==> Parameters: 
2021-08-27 16:10:12.994 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371678833217536 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:10:12.995 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371678833217536 [0;39m ==> Parameters: 
2021-08-27 16:10:12.998 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86371678829023232 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-08-27 16:10:12.998 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86371678682222592 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-08-27 16:10:12.999 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86371678829023232 [0;39m <==        Row: 2021-08-26, 62, 19
2021-08-27 16:10:12.999 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86371678682222592 [0;39m <==        Row: 2021-08-26, 62, 19, 62, 19
2021-08-27 16:10:13.001 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86371678682222592 [0;39m <==        Row: 2021-08-27, 62, 19, 0, 0
2021-08-27 16:10:13.001 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86371678829023232 [0;39m <==      Total: 1
2021-08-27 16:10:13.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86371678682222592 [0;39m <==      Total: 2
2021-08-27 16:10:13.006 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:10:13.006 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:10:13.007 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:10:13.007 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:10:13.008 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:10:13.008 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:10:13.008 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:10:13.009 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:10:13.009 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:10:13.010 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:10:13.010 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:10:13.011 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:10:13.012 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:10:13.012 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:10:13.013 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:10:13.013 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:10:13.013 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371678833217536 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:10:13.014 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371678833217536 [0;39m <==      Total: 16
2021-08-27 16:10:13.025 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371678833217536 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:10:13.025 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371678833217536 [0;39m ------------- 结束 耗时：83 ms -------------
2021-08-27 16:10:13.026 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371678829023232 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":0,"viewIncrease":62,"voteCount":0,"voteIncrease":19}],"success":true}
2021-08-27 16:10:13.026 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371678682222592 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":62,"viewIncrease":62,"voteCount":19,"voteIncrease":19},{"date":1629993600000,"viewCount":62,"viewIncrease":0,"voteCount":19,"voteIncrease":0}],"success":true}
2021-08-27 16:10:13.026 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371678829023232 [0;39m ------------- 结束 耗时：85 ms -------------
2021-08-27 16:10:13.026 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371678682222592 [0;39m ------------- 结束 耗时：120 ms -------------
2021-08-27 16:10:15.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371687469289472 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:15.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371687469289472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:15.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371687469289472 [0;39m ==> Parameters: 
2021-08-27 16:10:15.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371687469289472 [0;39m <==    Updates: 0
2021-08-27 16:10:15.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371687469289472 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:10:20.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371708461780992 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371708461780992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371708461780992 [0;39m ==> Parameters: 
2021-08-27 16:10:20.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371708461780992 [0;39m <==    Updates: 0
2021-08-27 16:10:20.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371708461780992 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:10:25.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371729429106688 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:25.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371729429106688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:25.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371729429106688 [0;39m ==> Parameters: 
2021-08-27 16:10:25.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371729429106688 [0;39m <==    Updates: 0
2021-08-27 16:10:25.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371729429106688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:10:30.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371750421598208 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371750421598208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371750421598208 [0;39m ==> Parameters: 
2021-08-27 16:10:30.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371750421598208 [0;39m <==    Updates: 0
2021-08-27 16:10:30.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371750421598208 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:10:35.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371771363758080 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:35.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371771363758080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:35.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371771363758080 [0;39m ==> Parameters: 
2021-08-27 16:10:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371771363758080 [0;39m <==    Updates: 0
2021-08-27 16:10:35.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371771363758080 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:10:35.006 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86371771376340992 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:10:35.006 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371771376340992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:10:35.006 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371771376340992 [0;39m ==> Parameters: 
2021-08-27 16:10:35.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371771376340992 [0;39m <==    Updates: 5
2021-08-27 16:10:35.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86371771376340992 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:10:35.231 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371772320059392 [0;39m ------------- 开始 -------------
2021-08-27 16:10:35.231 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371772320059392 [0;39m 请求地址: http://127.0.0.1:8880/user/login POST
2021-08-27 16:10:35.231 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371772320059392 [0;39m 类名方法: com.haoyu.knowlagebase.controller.UserController.login
2021-08-27 16:10:35.231 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371772320059392 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:35.232 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371772320059392 [0;39m 请求参数: [{"loginName":"test"}]
2021-08-27 16:10:35.241 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86371772320059392 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-08-27 16:10:35.242 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86371772320059392 [0;39m ==> Parameters: test(String)
2021-08-27 16:10:35.249 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86371772320059392 [0;39m <==    Columns: id, login_name, name, password
2021-08-27 16:10:35.249 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86371772320059392 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-27 16:10:35.249 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86371772320059392 [0;39m <==      Total: 1
2021-08-27 16:10:35.252 INFO  com.haoyu.knowlagebase.controller.UserController  :81   [32m86371772320059392 [0;39m 生成单点登录token：86371772408139776，并放入redis中
2021-08-27 16:10:36.191 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371772320059392 [0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"测试","token":"86371772408139776"},"success":true}
2021-08-27 16:10:36.192 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371772320059392 [0;39m ------------- 结束 耗时：961 ms -------------
2021-08-27 16:10:40.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371792385609728 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:40.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371792385609728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:40.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371792385609728 [0;39m ==> Parameters: 
2021-08-27 16:10:40.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371792385609728 [0;39m <==    Updates: 0
2021-08-27 16:10:40.018 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371792385609728 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:10:45.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371813331963904 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:45.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371813331963904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:45.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371813331963904 [0;39m ==> Parameters: 
2021-08-27 16:10:45.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371813331963904 [0;39m <==    Updates: 0
2021-08-27 16:10:45.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371813331963904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:10:50.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371834332844032 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:50.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371834332844032 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:50.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371834332844032 [0;39m ==> Parameters: 
2021-08-27 16:10:50.018 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371834332844032 [0;39m <==    Updates: 0
2021-08-27 16:10:50.018 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371834332844032 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:10:52.820 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :32   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-08-27 16:10:52.820 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :68   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-08-27 16:10:52.822 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :32   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2021-08-27 16:10:52.822 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :43   [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/list
2021-08-27 16:10:52.822 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :47   [32m                  [0;39m 登录校验开始，token：86371772408139776
2021-08-27 16:10:52.824 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :59   [32m                  [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"86371772408139776"}
2021-08-27 16:10:52.846 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371846202724352 [0;39m ------------- 开始 -------------
2021-08-27 16:10:52.846 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371846202724352 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2021-08-27 16:10:52.846 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371846202724352 [0;39m 类名方法: com.haoyu.knowlagebase.controller.UserController.list
2021-08-27 16:10:52.846 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371846202724352 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:52.848 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371846202724352 [0;39m 请求参数: [{"page":1,"size":10}]
2021-08-27 16:10:52.868 DEBUG c.h.k.mapper.UserMapper.selectByExample_COUNT     :137  [32m86371846202724352 [0;39m ==>  Preparing: SELECT count(0) FROM user
2021-08-27 16:10:52.868 DEBUG c.h.k.mapper.UserMapper.selectByExample_COUNT     :137  [32m86371846202724352 [0;39m ==> Parameters: 
2021-08-27 16:10:52.869 TRACE c.h.k.mapper.UserMapper.selectByExample_COUNT     :143  [32m86371846202724352 [0;39m <==    Columns: count(0)
2021-08-27 16:10:52.870 TRACE c.h.k.mapper.UserMapper.selectByExample_COUNT     :143  [32m86371846202724352 [0;39m <==        Row: 2
2021-08-27 16:10:52.870 DEBUG c.h.k.mapper.UserMapper.selectByExample_COUNT     :137  [32m86371846202724352 [0;39m <==      Total: 1
2021-08-27 16:10:52.872 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86371846202724352 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-08-27 16:10:52.872 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86371846202724352 [0;39m ==> Parameters: 10(Integer)
2021-08-27 16:10:52.873 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86371846202724352 [0;39m <==    Columns: id, login_name, name, password
2021-08-27 16:10:52.873 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86371846202724352 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-27 16:10:52.874 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86371846202724352 [0;39m <==        Row: 84603304096698368, 11111, 111111, b9207c7ae418edcbdef11219daae3474
2021-08-27 16:10:52.874 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86371846202724352 [0;39m <==      Total: 2
2021-08-27 16:10:52.875 INFO  com.haoyu.knowlagebase.service.UserService        :52   [32m86371846202724352 [0;39m 总行数:2
2021-08-27 16:10:52.875 INFO  com.haoyu.knowlagebase.service.UserService        :53   [32m86371846202724352 [0;39m 总页数:1
2021-08-27 16:10:52.879 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371846202724352 [0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":84603304096698368,"loginName":"11111","name":"111111"}],"total":2},"success":true}
2021-08-27 16:10:52.879 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371846202724352 [0;39m ------------- 结束 耗时：33 ms -------------
2021-08-27 16:10:52.882 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :68   [32m86371846202724352 [0;39m ------------- LoginInterceptor 结束 耗时：60 ms -------------
2021-08-27 16:10:53.684 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371849717551104 [0;39m ------------- 开始 -------------
2021-08-27 16:10:53.684 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371849717551104 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:10:53.684 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371849717551104 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:10:53.684 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371849717551104 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:53.684 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371849717551104 [0;39m 请求参数: []
2021-08-27 16:10:53.685 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371849717551104 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:10:53.685 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371849717551104 [0;39m ==> Parameters: 
2021-08-27 16:10:53.686 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:10:53.686 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:10:53.686 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:10:53.687 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:10:53.687 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:10:53.687 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:10:53.687 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:10:53.688 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:10:53.688 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:10:53.688 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:10:53.688 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:10:53.688 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:10:53.689 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:10:53.689 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:10:53.689 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:10:53.689 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:10:53.690 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371849717551104 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:10:53.690 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371849717551104 [0;39m <==      Total: 16
2021-08-27 16:10:53.691 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371849717551104 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:10:53.691 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371849717551104 [0;39m ------------- 结束 耗时：7 ms -------------
2021-08-27 16:10:53.712 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371849834991616 [0;39m ------------- 开始 -------------
2021-08-27 16:10:53.712 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371849834991616 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-08-27 16:10:53.712 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371849834991616 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookController.list
2021-08-27 16:10:53.712 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371849834991616 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:53.714 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371849834991616 [0;39m 请求参数: [{"page":1,"size":10}]
2021-08-27 16:10:53.718 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86371849834991616 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-08-27 16:10:53.718 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86371849834991616 [0;39m ==> Parameters: 
2021-08-27 16:10:53.719 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86371849834991616 [0;39m <==    Columns: count(0)
2021-08-27 16:10:53.719 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86371849834991616 [0;39m <==        Row: 7
2021-08-27 16:10:53.719 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86371849834991616 [0;39m <==      Total: 1
2021-08-27 16:10:53.720 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86371849834991616 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-08-27 16:10:53.720 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86371849834991616 [0;39m ==> Parameters: 10(Integer)
2021-08-27 16:10:53.721 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-08-27 16:10:53.722 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover2.png, 13, 44, 12
2021-08-27 16:10:53.722 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2021-08-27 16:10:53.722 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 3, 14, 3
2021-08-27 16:10:53.723 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 1, 0, 0
2021-08-27 16:10:53.723 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==        Row: 5, Oracle 入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 1, 1, 1
2021-08-27 16:10:53.723 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==        Row: 83286321791111168, 1, 200, 202, 1, 1, 0, 0, 0
2021-08-27 16:10:53.724 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371849834991616 [0;39m <==        Row: 85670061133664256, 111, 100, 82110017238601728, 111, 111, 3, 3, 3
2021-08-27 16:10:53.724 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86371849834991616 [0;39m <==      Total: 7
2021-08-27 16:10:53.724 INFO  com.haoyu.knowlagebase.service.EbookService       :49   [32m86371849834991616 [0;39m 总行数:7
2021-08-27 16:10:53.724 INFO  com.haoyu.knowlagebase.service.EbookService       :50   [32m86371849834991616 [0;39m 总页数:1
2021-08-27 16:10:53.729 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371849834991616 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover2.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":13,"id":1,"name":"Spring Boot 入门教程","viewCount":44,"voteCount":12},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":3,"id":3,"name":"Python 入门教程","viewCount":14,"voteCount":3},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle 入门教程","viewCount":1,"voteCount":1},{"category1Id":200,"category2Id":202,"cover":"1","description":"1","docCount":0,"id":83286321791111168,"name":"1","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":82110017238601728,"cover":"111","description":"111","docCount":3,"id":85670061133664256,"name":"111","viewCount":3,"voteCount":3}],"total":7},"success":true}
2021-08-27 16:10:53.729 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371849834991616 [0;39m ------------- 结束 耗时：17 ms -------------
2021-08-27 16:10:55.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371855283392512 [0;39m 生成今日电子书快照开始
2021-08-27 16:10:55.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371855283392512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:10:55.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371855283392512 [0;39m ==> Parameters: 
2021-08-27 16:10:55.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371855283392512 [0;39m <==    Updates: 0
2021-08-27 16:10:55.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371855283392512 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:10:56.271 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371860568215552 [0;39m ------------- 开始 -------------
2021-08-27 16:10:56.271 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371860568215552 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:10:56.272 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371860568215552 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:10:56.272 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371860568215552 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:56.272 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371860568215552 [0;39m 请求参数: []
2021-08-27 16:10:56.272 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371860568215552 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:10:56.273 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371860568215552 [0;39m ==> Parameters: 
2021-08-27 16:10:56.273 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:10:56.273 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:10:56.274 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:10:56.274 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:10:56.274 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:10:56.274 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:10:56.274 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:10:56.275 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:10:56.275 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:10:56.275 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:10:56.275 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:10:56.276 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:10:56.276 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:10:56.276 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:10:56.277 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:10:56.277 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:10:56.278 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371860568215552 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:10:56.278 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371860568215552 [0;39m <==      Total: 16
2021-08-27 16:10:56.279 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371860568215552 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:10:56.279 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371860568215552 [0;39m ------------- 结束 耗时：8 ms -------------
2021-08-27 16:10:58.250 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371868868743168 [0;39m ------------- 开始 -------------
2021-08-27 16:10:58.250 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371868868743168 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:10:58.250 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371868868743168 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:10:58.250 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371868868743168 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:10:58.250 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371868868743168 [0;39m 请求参数: []
2021-08-27 16:10:58.251 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371868868743168 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:10:58.252 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371868868743168 [0;39m ==> Parameters: 
2021-08-27 16:10:58.252 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:10:58.252 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:10:58.253 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:10:58.253 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:10:58.253 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:10:58.253 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:10:58.253 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:10:58.254 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:10:58.254 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:10:58.254 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:10:58.254 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:10:58.254 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:10:58.255 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:10:58.255 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:10:58.255 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:10:58.255 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:10:58.255 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371868868743168 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:10:58.255 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371868868743168 [0;39m <==      Total: 16
2021-08-27 16:10:58.257 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371868868743168 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:10:58.257 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371868868743168 [0;39m ------------- 结束 耗时：7 ms -------------
2021-08-27 16:11:00.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371876263301120 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:00.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371876263301120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:00.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371876263301120 [0;39m ==> Parameters: 
2021-08-27 16:11:00.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371876263301120 [0;39m <==    Updates: 0
2021-08-27 16:11:00.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371876263301120 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:11:01.367 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371881942388736 [0;39m ------------- 开始 -------------
2021-08-27 16:11:01.367 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371881942388736 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:11:01.368 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371881942388736 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:11:01.368 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371881942388736 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:11:01.368 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371881942388736 [0;39m 请求参数: []
2021-08-27 16:11:01.368 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371881942388736 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:11:01.369 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371881942388736 [0;39m ==> Parameters: 
2021-08-27 16:11:01.369 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:11:01.370 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:11:01.370 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:11:01.370 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:11:01.370 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:11:01.370 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:11:01.371 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:11:01.371 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:11:01.371 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:11:01.371 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:11:01.371 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:11:01.371 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:11:01.372 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:11:01.372 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:11:01.372 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:11:01.372 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:11:01.372 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371881942388736 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:11:01.372 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371881942388736 [0;39m <==      Total: 16
2021-08-27 16:11:01.373 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371881942388736 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:11:01.373 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371881942388736 [0;39m ------------- 结束 耗时：6 ms -------------
2021-08-27 16:11:01.383 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371882009497600 [0;39m ------------- 开始 -------------
2021-08-27 16:11:01.384 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371882009497600 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-08-27 16:11:01.384 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371882009497600 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookController.list
2021-08-27 16:11:01.385 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371882009497600 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:11:01.385 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371882009497600 [0;39m 请求参数: [{"page":1,"size":10}]
2021-08-27 16:11:01.386 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86371882009497600 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-08-27 16:11:01.386 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86371882009497600 [0;39m ==> Parameters: 
2021-08-27 16:11:01.387 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86371882009497600 [0;39m <==    Columns: count(0)
2021-08-27 16:11:01.387 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86371882009497600 [0;39m <==        Row: 7
2021-08-27 16:11:01.387 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86371882009497600 [0;39m <==      Total: 1
2021-08-27 16:11:01.387 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86371882009497600 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-08-27 16:11:01.387 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86371882009497600 [0;39m ==> Parameters: 10(Integer)
2021-08-27 16:11:01.388 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-08-27 16:11:01.388 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover2.png, 13, 44, 12
2021-08-27 16:11:01.388 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2021-08-27 16:11:01.388 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 3, 14, 3
2021-08-27 16:11:01.389 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 1, 0, 0
2021-08-27 16:11:01.389 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==        Row: 5, Oracle 入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 1, 1, 1
2021-08-27 16:11:01.389 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==        Row: 83286321791111168, 1, 200, 202, 1, 1, 0, 0, 0
2021-08-27 16:11:01.389 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86371882009497600 [0;39m <==        Row: 85670061133664256, 111, 100, 82110017238601728, 111, 111, 3, 3, 3
2021-08-27 16:11:01.389 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86371882009497600 [0;39m <==      Total: 7
2021-08-27 16:11:01.390 INFO  com.haoyu.knowlagebase.service.EbookService       :49   [32m86371882009497600 [0;39m 总行数:7
2021-08-27 16:11:01.390 INFO  com.haoyu.knowlagebase.service.EbookService       :50   [32m86371882009497600 [0;39m 总页数:1
2021-08-27 16:11:01.390 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371882009497600 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover2.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":13,"id":1,"name":"Spring Boot 入门教程","viewCount":44,"voteCount":12},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":3,"id":3,"name":"Python 入门教程","viewCount":14,"voteCount":3},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle 入门教程","viewCount":1,"voteCount":1},{"category1Id":200,"category2Id":202,"cover":"1","description":"1","docCount":0,"id":83286321791111168,"name":"1","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":82110017238601728,"cover":"111","description":"111","docCount":3,"id":85670061133664256,"name":"111","viewCount":3,"voteCount":3}],"total":7},"success":true}
2021-08-27 16:11:01.390 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371882009497600 [0;39m ------------- 结束 耗时：7 ms -------------
2021-08-27 16:11:02.052 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371884815486976 [0;39m ------------- 开始 -------------
2021-08-27 16:11:02.053 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371884815486976 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:11:02.053 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371884815486976 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:11:02.053 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371884815486976 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:11:02.053 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371884815486976 [0;39m 请求参数: []
2021-08-27 16:11:02.054 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371884815486976 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371884823875585 [0;39m ------------- 开始 -------------
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86371884823875584 [0;39m ------------- 开始 -------------
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371884823875585 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86371884823875584 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-08-27 16:11:02.054 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371884815486976 [0;39m ==> Parameters: 
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371884823875585 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.getStatistic
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86371884823875584 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.get30Statistic
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371884823875584 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:11:02.054 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86371884823875585 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:11:02.055 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371884823875585 [0;39m 请求参数: []
2021-08-27 16:11:02.055 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86371884823875584 [0;39m 请求参数: []
2021-08-27 16:11:02.055 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86371884823875585 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:11:02.055 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86371884823875584 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:11:02.055 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:11:02.055 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86371884823875585 [0;39m ==> Parameters: 
2021-08-27 16:11:02.055 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:11:02.055 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86371884823875584 [0;39m ==> Parameters: 
2021-08-27 16:11:02.056 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:11:02.056 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:11:02.056 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:11:02.056 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:11:02.056 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86371884823875584 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-08-27 16:11:02.056 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:11:02.056 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86371884823875585 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-08-27 16:11:02.056 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86371884823875584 [0;39m <==        Row: 2021-08-26, 62, 19
2021-08-27 16:11:02.056 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:11:02.057 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86371884823875585 [0;39m <==        Row: 2021-08-26, 62, 19, 62, 19
2021-08-27 16:11:02.057 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:11:02.057 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86371884823875584 [0;39m <==      Total: 1
2021-08-27 16:11:02.057 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:11:02.057 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86371884823875585 [0;39m <==        Row: 2021-08-27, 62, 19, 0, 0
2021-08-27 16:11:02.057 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371884823875584 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":0,"viewIncrease":62,"voteCount":0,"voteIncrease":19}],"success":true}
2021-08-27 16:11:02.057 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:11:02.057 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371884823875584 [0;39m ------------- 结束 耗时：3 ms -------------
2021-08-27 16:11:02.057 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86371884823875585 [0;39m <==      Total: 2
2021-08-27 16:11:02.057 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:11:02.057 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:11:02.058 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:11:02.058 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371884823875585 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":62,"viewIncrease":62,"voteCount":19,"voteIncrease":19},{"date":1629993600000,"viewCount":62,"viewIncrease":0,"voteCount":19,"voteIncrease":0}],"success":true}
2021-08-27 16:11:02.058 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:11:02.058 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371884823875585 [0;39m ------------- 结束 耗时：4 ms -------------
2021-08-27 16:11:02.058 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:11:02.058 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86371884815486976 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:11:02.058 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86371884815486976 [0;39m <==      Total: 16
2021-08-27 16:11:02.059 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86371884815486976 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:11:02.059 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86371884815486976 [0;39m ------------- 结束 耗时：7 ms -------------
2021-08-27 16:11:05.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371897188683776 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:05.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371897188683776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:05.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371897188683776 [0;39m ==> Parameters: 
2021-08-27 16:11:05.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371897188683776 [0;39m <==    Updates: 0
2021-08-27 16:11:05.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371897188683776 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:11:05.004 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86371897197072384 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:11:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371897197072384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:11:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371897197072384 [0;39m ==> Parameters: 
2021-08-27 16:11:05.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86371897197072384 [0;39m <==    Updates: 5
2021-08-27 16:11:05.005 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86371897197072384 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:11:10.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371918168592384 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:10.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371918168592384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:10.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371918168592384 [0;39m ==> Parameters: 
2021-08-27 16:11:10.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371918168592384 [0;39m <==    Updates: 0
2021-08-27 16:11:10.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371918168592384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:11:15.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371939144306688 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:15.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371939144306688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:15.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371939144306688 [0;39m ==> Parameters: 
2021-08-27 16:11:15.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371939144306688 [0;39m <==    Updates: 0
2021-08-27 16:11:15.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371939144306688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:11:20.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371960145186816 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:20.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371960145186816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:20.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371960145186816 [0;39m ==> Parameters: 
2021-08-27 16:11:20.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371960145186816 [0;39m <==    Updates: 0
2021-08-27 16:11:20.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371960145186816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:11:25.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86371981112512512 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:25.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371981112512512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:25.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371981112512512 [0;39m ==> Parameters: 
2021-08-27 16:11:25.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86371981112512512 [0;39m <==    Updates: 0
2021-08-27 16:11:25.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86371981112512512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:11:30.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372002092421120 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:30.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372002092421120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:30.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372002092421120 [0;39m ==> Parameters: 
2021-08-27 16:11:30.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372002092421120 [0;39m <==    Updates: 0
2021-08-27 16:11:30.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372002092421120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:11:35.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372023063941120 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:35.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372023063941120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:35.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372023063941120 [0;39m ==> Parameters: 
2021-08-27 16:11:35.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372023063941120 [0;39m <==    Updates: 0
2021-08-27 16:11:35.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372023063941120 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:11:35.017 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372023080718336 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:11:35.017 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372023080718336 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:11:35.017 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372023080718336 [0;39m ==> Parameters: 
2021-08-27 16:11:35.018 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372023080718336 [0;39m <==    Updates: 5
2021-08-27 16:11:35.018 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372023080718336 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:11:40.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372043985129472 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:40.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372043985129472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:40.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372043985129472 [0;39m ==> Parameters: 
2021-08-27 16:11:40.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372043985129472 [0;39m <==    Updates: 0
2021-08-27 16:11:40.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372043985129472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:11:45.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372064969232384 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:45.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372064969232384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:45.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372064969232384 [0;39m ==> Parameters: 
2021-08-27 16:11:45.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372064969232384 [0;39m <==    Updates: 0
2021-08-27 16:11:45.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372064969232384 [0;39m 生成今日电子书快照结束，耗时：7毫秒
2021-08-27 16:11:50.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372085961723904 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:50.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372085961723904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:50.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372085961723904 [0;39m ==> Parameters: 
2021-08-27 16:11:50.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372085961723904 [0;39m <==    Updates: 0
2021-08-27 16:11:50.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372085961723904 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:11:55.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372106933243904 [0;39m 生成今日电子书快照开始
2021-08-27 16:11:55.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372106933243904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:11:55.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372106933243904 [0;39m ==> Parameters: 
2021-08-27 16:11:55.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372106933243904 [0;39m <==    Updates: 0
2021-08-27 16:11:55.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372106933243904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:12:00.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372127913152512 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:00.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372127913152512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:00.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372127913152512 [0;39m ==> Parameters: 
2021-08-27 16:12:00.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372127913152512 [0;39m <==    Updates: 0
2021-08-27 16:12:00.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372127913152512 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:12:05.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372148867895296 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:12:05.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372148867895296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:12:05.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372148867895296 [0;39m ==> Parameters: 
2021-08-27 16:12:05.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372148867895296 [0;39m <==    Updates: 5
2021-08-27 16:12:05.010 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372148867895296 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2021-08-27 16:12:05.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372148880478208 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:05.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372148880478208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:05.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372148880478208 [0;39m ==> Parameters: 
2021-08-27 16:12:05.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372148880478208 [0;39m <==    Updates: 0
2021-08-27 16:12:05.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372148880478208 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:12:10.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372169814249472 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:10.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372169814249472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:10.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372169814249472 [0;39m ==> Parameters: 
2021-08-27 16:12:10.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372169814249472 [0;39m <==    Updates: 0
2021-08-27 16:12:10.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372169814249472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:12:15.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372190831906816 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:15.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372190831906816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:15.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372190831906816 [0;39m ==> Parameters: 
2021-08-27 16:12:15.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372190831906816 [0;39m <==    Updates: 0
2021-08-27 16:12:15.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372190831906816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:12:20.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372211799232512 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:20.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372211799232512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:20.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372211799232512 [0;39m ==> Parameters: 
2021-08-27 16:12:20.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372211799232512 [0;39m <==    Updates: 0
2021-08-27 16:12:20.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372211799232512 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:12:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372232762363904 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:25.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372232762363904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:25.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372232762363904 [0;39m ==> Parameters: 
2021-08-27 16:12:25.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372232762363904 [0;39m <==    Updates: 0
2021-08-27 16:12:25.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372232762363904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:12:30.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372253750661120 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:30.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372253750661120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:30.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372253750661120 [0;39m ==> Parameters: 
2021-08-27 16:12:30.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372253750661120 [0;39m <==    Updates: 0
2021-08-27 16:12:30.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372253750661120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:12:33.321 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372267625418752 [0;39m ------------- 开始 -------------
2021-08-27 16:12:33.322 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372267625418752 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:12:33.322 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372267625418752 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:12:33.322 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372267625418752 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:33.322 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372267625418752 [0;39m 请求参数: []
2021-08-27 16:12:33.322 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372267625418752 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:12:33.323 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372267625418752 [0;39m ==> Parameters: 
2021-08-27 16:12:33.323 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:12:33.323 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:12:33.324 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:12:33.324 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:12:33.324 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:12:33.324 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:12:33.324 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:12:33.324 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:12:33.324 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:12:33.325 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:12:33.325 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:12:33.325 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:12:33.325 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:12:33.325 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:12:33.325 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:12:33.326 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:12:33.326 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372267625418752 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:12:33.326 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372267625418752 [0;39m <==      Total: 16
2021-08-27 16:12:33.326 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372267625418752 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:12:33.327 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372267625418752 [0;39m ------------- 结束 耗时：6 ms -------------
2021-08-27 16:12:35.002 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372274676043776 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:12:35.002 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372274676043776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:12:35.002 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372274676043776 [0;39m ==> Parameters: 
2021-08-27 16:12:35.003 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372274676043776 [0;39m <==    Updates: 5
2021-08-27 16:12:35.003 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372274676043776 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:12:35.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372274684432384 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:35.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372274684432384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:35.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372274684432384 [0;39m ==> Parameters: 
2021-08-27 16:12:35.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372274684432384 [0;39m <==    Updates: 0
2021-08-27 16:12:35.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372274684432384 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:12:36.498 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372280950722560 [0;39m ------------- 开始 -------------
2021-08-27 16:12:36.499 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372280950722560 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:12:36.499 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372280950722560 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:12:36.499 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372280950722560 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:36.499 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372280950722560 [0;39m 请求参数: []
2021-08-27 16:12:36.500 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372280950722560 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:12:36.500 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372280950722560 [0;39m ==> Parameters: 
2021-08-27 16:12:36.501 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:12:36.501 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:12:36.501 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:12:36.501 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:12:36.502 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:12:36.502 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:12:36.502 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:12:36.502 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:12:36.502 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:12:36.502 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:12:36.503 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:12:36.503 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:12:36.503 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:12:36.503 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:12:36.503 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:12:36.504 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:12:36.504 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372280950722560 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:12:36.504 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372280950722560 [0;39m <==      Total: 16
2021-08-27 16:12:36.505 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372280950722560 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:12:36.505 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372280950722560 [0;39m ------------- 结束 耗时：7 ms -------------
2021-08-27 16:12:36.517 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372281030414336 [0;39m ------------- 开始 -------------
2021-08-27 16:12:36.518 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372281030414336 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-08-27 16:12:36.518 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372281030414336 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookController.list
2021-08-27 16:12:36.518 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372281030414336 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:36.518 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372281030414336 [0;39m 请求参数: [{"page":1,"size":10}]
2021-08-27 16:12:36.519 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86372281030414336 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-08-27 16:12:36.520 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86372281030414336 [0;39m ==> Parameters: 
2021-08-27 16:12:36.521 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86372281030414336 [0;39m <==    Columns: count(0)
2021-08-27 16:12:36.522 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86372281030414336 [0;39m <==        Row: 7
2021-08-27 16:12:36.522 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86372281030414336 [0;39m <==      Total: 1
2021-08-27 16:12:36.522 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86372281030414336 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-08-27 16:12:36.522 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86372281030414336 [0;39m ==> Parameters: 10(Integer)
2021-08-27 16:12:36.523 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-08-27 16:12:36.523 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover2.png, 13, 44, 12
2021-08-27 16:12:36.523 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2021-08-27 16:12:36.525 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 3, 14, 3
2021-08-27 16:12:36.525 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 1, 0, 0
2021-08-27 16:12:36.525 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==        Row: 5, Oracle 入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 1, 1, 1
2021-08-27 16:12:36.525 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==        Row: 83286321791111168, 1, 200, 202, 1, 1, 0, 0, 0
2021-08-27 16:12:36.526 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372281030414336 [0;39m <==        Row: 85670061133664256, 111, 100, 82110017238601728, 111, 111, 3, 3, 3
2021-08-27 16:12:36.526 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86372281030414336 [0;39m <==      Total: 7
2021-08-27 16:12:36.526 INFO  com.haoyu.knowlagebase.service.EbookService       :49   [32m86372281030414336 [0;39m 总行数:7
2021-08-27 16:12:36.526 INFO  com.haoyu.knowlagebase.service.EbookService       :50   [32m86372281030414336 [0;39m 总页数:1
2021-08-27 16:12:36.528 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372281030414336 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover2.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":13,"id":1,"name":"Spring Boot 入门教程","viewCount":44,"voteCount":12},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":3,"id":3,"name":"Python 入门教程","viewCount":14,"voteCount":3},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle 入门教程","viewCount":1,"voteCount":1},{"category1Id":200,"category2Id":202,"cover":"1","description":"1","docCount":0,"id":83286321791111168,"name":"1","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":82110017238601728,"cover":"111","description":"111","docCount":3,"id":85670061133664256,"name":"111","viewCount":3,"voteCount":3}],"total":7},"success":true}
2021-08-27 16:12:36.528 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372281030414336 [0;39m ------------- 结束 耗时：11 ms -------------
2021-08-27 16:12:39.668 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372294246666240 [0;39m ------------- 开始 -------------
2021-08-27 16:12:39.668 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372294246666240 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:12:39.668 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372294246666240 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:12:39.668 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372294246666240 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:39.669 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372294246666240 [0;39m 请求参数: []
2021-08-27 16:12:39.669 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372294246666240 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:12:39.669 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372294246666240 [0;39m ==> Parameters: 
2021-08-27 16:12:39.670 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:12:39.670 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:12:39.670 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:12:39.670 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:12:39.671 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:12:39.671 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:12:39.671 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:12:39.671 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:12:39.671 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:12:39.671 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:12:39.672 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:12:39.672 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:12:39.672 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:12:39.672 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:12:39.672 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:12:39.672 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:12:39.672 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372294246666240 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:12:39.673 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372294246666240 [0;39m <==      Total: 16
2021-08-27 16:12:39.673 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372294246666240 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:12:39.673 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372294246666240 [0;39m ------------- 结束 耗时：5 ms -------------
2021-08-27 16:12:40.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372295676923904 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:40.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372295676923904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:40.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372295676923904 [0;39m ==> Parameters: 
2021-08-27 16:12:40.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372295676923904 [0;39m <==    Updates: 0
2021-08-27 16:12:40.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372295676923904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:12:40.481 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372297656635392 [0;39m ------------- 开始 -------------
2021-08-27 16:12:40.481 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372297656635392 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:12:40.482 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372297656635392 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:12:40.482 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372297656635392 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:40.482 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372297656635392 [0;39m 请求参数: []
2021-08-27 16:12:40.483 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372297656635392 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:12:40.483 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372297656635392 [0;39m ==> Parameters: 
2021-08-27 16:12:40.483 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:12:40.483 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:12:40.484 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:12:40.484 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:12:40.484 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:12:40.484 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:12:40.484 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:12:40.484 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:12:40.484 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:12:40.485 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:12:40.485 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:12:40.485 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:12:40.485 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:12:40.485 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:12:40.485 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:12:40.486 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:12:40.486 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372297656635392 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:12:40.486 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372297656635392 [0;39m <==      Total: 16
2021-08-27 16:12:40.486 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372297656635392 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:12:40.487 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372297656635392 [0;39m ------------- 结束 耗时：6 ms -------------
2021-08-27 16:12:40.805 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372299015589888 [0;39m ------------- 开始 -------------
2021-08-27 16:12:40.805 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372299015589888 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:12:40.805 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372299015589888 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:12:40.806 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372299015589888 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:40.806 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372299015589888 [0;39m 请求参数: []
2021-08-27 16:12:40.806 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372299015589888 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:12:40.807 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372299015589888 [0;39m ==> Parameters: 
2021-08-27 16:12:40.808 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:12:40.808 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:12:40.808 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:12:40.808 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:12:40.808 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:12:40.808 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:12:40.809 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:12:40.809 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:12:40.809 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:12:40.809 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:12:40.809 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:12:40.809 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:12:40.809 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:12:40.810 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:12:40.810 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:12:40.810 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:12:40.810 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372299015589888 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:12:40.811 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372299015589888 [0;39m <==      Total: 16
2021-08-27 16:12:40.811 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372299015589888 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:12:40.811 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372299015589888 [0;39m ------------- 结束 耗时：6 ms -------------
2021-08-27 16:12:40.821 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372299082698752 [0;39m ------------- 开始 -------------
2021-08-27 16:12:40.822 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372299082698752 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2021-08-27 16:12:40.822 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372299082698752 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookController.list
2021-08-27 16:12:40.822 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372299082698752 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:40.822 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372299082698752 [0;39m 请求参数: [{"page":1,"size":10}]
2021-08-27 16:12:40.824 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86372299082698752 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2021-08-27 16:12:40.824 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86372299082698752 [0;39m ==> Parameters: 
2021-08-27 16:12:40.825 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86372299082698752 [0;39m <==    Columns: count(0)
2021-08-27 16:12:40.825 TRACE c.h.k.mapper.EbookMapper.selectByExample_COUNT    :143  [32m86372299082698752 [0;39m <==        Row: 7
2021-08-27 16:12:40.826 DEBUG c.h.k.mapper.EbookMapper.selectByExample_COUNT    :137  [32m86372299082698752 [0;39m <==      Total: 1
2021-08-27 16:12:40.826 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86372299082698752 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2021-08-27 16:12:40.827 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86372299082698752 [0;39m ==> Parameters: 10(Integer)
2021-08-27 16:12:40.827 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2021-08-27 16:12:40.828 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover2.png, 13, 44, 12
2021-08-27 16:12:40.828 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2021-08-27 16:12:40.828 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 3, 14, 3
2021-08-27 16:12:40.828 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 1, 0, 0
2021-08-27 16:12:40.829 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==        Row: 5, Oracle 入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 1, 1, 1
2021-08-27 16:12:40.829 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==        Row: 83286321791111168, 1, 200, 202, 1, 1, 0, 0, 0
2021-08-27 16:12:40.829 TRACE c.h.k.mapper.EbookMapper.selectByExample          :143  [32m86372299082698752 [0;39m <==        Row: 85670061133664256, 111, 100, 82110017238601728, 111, 111, 3, 3, 3
2021-08-27 16:12:40.829 DEBUG c.h.k.mapper.EbookMapper.selectByExample          :137  [32m86372299082698752 [0;39m <==      Total: 7
2021-08-27 16:12:40.830 INFO  com.haoyu.knowlagebase.service.EbookService       :49   [32m86372299082698752 [0;39m 总行数:7
2021-08-27 16:12:40.830 INFO  com.haoyu.knowlagebase.service.EbookService       :50   [32m86372299082698752 [0;39m 总页数:1
2021-08-27 16:12:40.830 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372299082698752 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover2.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":13,"id":1,"name":"Spring Boot 入门教程","viewCount":44,"voteCount":12},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":3,"id":3,"name":"Python 入门教程","viewCount":14,"voteCount":3},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle 入门教程","viewCount":1,"voteCount":1},{"category1Id":200,"category2Id":202,"cover":"1","description":"1","docCount":0,"id":83286321791111168,"name":"1","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":82110017238601728,"cover":"111","description":"111","docCount":3,"id":85670061133664256,"name":"111","viewCount":3,"voteCount":3}],"total":7},"success":true}
2021-08-27 16:12:40.830 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372299082698752 [0;39m ------------- 结束 耗时：9 ms -------------
2021-08-27 16:12:41.164 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :32   [32m86371860568215552 [0;39m ------------- LoginInterceptor 开始 -------------
2021-08-27 16:12:41.164 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :43   [32m86371860568215552 [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/list
2021-08-27 16:12:41.164 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :47   [32m86371860568215552 [0;39m 登录校验开始，token：86371772408139776
2021-08-27 16:12:41.166 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :59   [32m86371860568215552 [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"86371772408139776"}
2021-08-27 16:12:41.167 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372300533927936 [0;39m ------------- 开始 -------------
2021-08-27 16:12:41.167 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372300533927936 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2021-08-27 16:12:41.167 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372300533927936 [0;39m 类名方法: com.haoyu.knowlagebase.controller.UserController.list
2021-08-27 16:12:41.167 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372300533927936 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:41.167 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372300533927936 [0;39m 请求参数: [{"page":1,"size":10}]
2021-08-27 16:12:41.168 DEBUG c.h.k.mapper.UserMapper.selectByExample_COUNT     :137  [32m86372300533927936 [0;39m ==>  Preparing: SELECT count(0) FROM user
2021-08-27 16:12:41.168 DEBUG c.h.k.mapper.UserMapper.selectByExample_COUNT     :137  [32m86372300533927936 [0;39m ==> Parameters: 
2021-08-27 16:12:41.169 TRACE c.h.k.mapper.UserMapper.selectByExample_COUNT     :143  [32m86372300533927936 [0;39m <==    Columns: count(0)
2021-08-27 16:12:41.169 TRACE c.h.k.mapper.UserMapper.selectByExample_COUNT     :143  [32m86372300533927936 [0;39m <==        Row: 2
2021-08-27 16:12:41.169 DEBUG c.h.k.mapper.UserMapper.selectByExample_COUNT     :137  [32m86372300533927936 [0;39m <==      Total: 1
2021-08-27 16:12:41.170 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86372300533927936 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2021-08-27 16:12:41.170 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86372300533927936 [0;39m ==> Parameters: 10(Integer)
2021-08-27 16:12:41.170 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86372300533927936 [0;39m <==    Columns: id, login_name, name, password
2021-08-27 16:12:41.170 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86372300533927936 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-27 16:12:41.171 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86372300533927936 [0;39m <==        Row: 84603304096698368, 11111, 111111, b9207c7ae418edcbdef11219daae3474
2021-08-27 16:12:41.171 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86372300533927936 [0;39m <==      Total: 2
2021-08-27 16:12:41.171 INFO  com.haoyu.knowlagebase.service.UserService        :52   [32m86372300533927936 [0;39m 总行数:2
2021-08-27 16:12:41.171 INFO  com.haoyu.knowlagebase.service.UserService        :53   [32m86372300533927936 [0;39m 总页数:1
2021-08-27 16:12:41.171 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372300533927936 [0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":84603304096698368,"loginName":"11111","name":"111111"}],"total":2},"success":true}
2021-08-27 16:12:41.171 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372300533927936 [0;39m ------------- 结束 耗时：4 ms -------------
2021-08-27 16:12:41.172 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :68   [32m86372300533927936 [0;39m ------------- LoginInterceptor 结束 耗时：8 ms -------------
2021-08-27 16:12:42.067 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372304308801536 [0;39m ------------- 开始 -------------
2021-08-27 16:12:42.067 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372304308801536 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-08-27 16:12:42.067 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372304308801536 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.getStatistic
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372304308801536 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372304312995840 [0;39m ------------- 开始 -------------
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86372304312995841 [0;39m ------------- 开始 -------------
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372304312995840 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372304308801536 [0;39m 请求参数: []
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86372304312995841 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372304312995840 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372304312995840 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86372304312995841 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.get30Statistic
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372304312995840 [0;39m 请求参数: []
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86372304312995841 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:12:42.068 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86372304308801536 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:12:42.068 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86372304312995841 [0;39m 请求参数: []
2021-08-27 16:12:42.069 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86372304308801536 [0;39m ==> Parameters: 
2021-08-27 16:12:42.069 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372304312995840 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:12:42.069 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86372304312995841 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:12:42.069 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372304312995840 [0;39m ==> Parameters: 
2021-08-27 16:12:42.069 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86372304312995841 [0;39m ==> Parameters: 
2021-08-27 16:12:42.069 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86372304308801536 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-08-27 16:12:42.069 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:12:42.070 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86372304308801536 [0;39m <==        Row: 2021-08-26, 62, 19, 62, 19
2021-08-27 16:12:42.070 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:12:42.070 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86372304312995841 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-08-27 16:12:42.070 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86372304312995841 [0;39m <==        Row: 2021-08-26, 62, 19
2021-08-27 16:12:42.070 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:12:42.070 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86372304308801536 [0;39m <==        Row: 2021-08-27, 62, 19, 0, 0
2021-08-27 16:12:42.070 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:12:42.070 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86372304308801536 [0;39m <==      Total: 2
2021-08-27 16:12:42.070 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86372304312995841 [0;39m <==      Total: 1
2021-08-27 16:12:42.071 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:12:42.071 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372304312995841 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":0,"viewIncrease":62,"voteCount":0,"voteIncrease":19}],"success":true}
2021-08-27 16:12:42.071 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372304308801536 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":62,"viewIncrease":62,"voteCount":19,"voteIncrease":19},{"date":1629993600000,"viewCount":62,"viewIncrease":0,"voteCount":19,"voteIncrease":0}],"success":true}
2021-08-27 16:12:42.071 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372304312995841 [0;39m ------------- 结束 耗时：3 ms -------------
2021-08-27 16:12:42.071 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372304308801536 [0;39m ------------- 结束 耗时：4 ms -------------
2021-08-27 16:12:42.071 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:12:42.071 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:12:42.071 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:12:42.071 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:12:42.072 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:12:42.072 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:12:42.072 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:12:42.072 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:12:42.072 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:12:42.073 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:12:42.073 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:12:42.073 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86372304312995840 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:12:42.073 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86372304312995840 [0;39m <==      Total: 16
2021-08-27 16:12:42.074 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86372304312995840 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:12:42.074 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86372304312995840 [0;39m ------------- 结束 耗时：6 ms -------------
2021-08-27 16:12:45.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372316627472384 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:45.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372316627472384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:45.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372316627472384 [0;39m ==> Parameters: 
2021-08-27 16:12:45.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372316627472384 [0;39m <==    Updates: 0
2021-08-27 16:12:45.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372316627472384 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:12:50.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372337632546816 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:50.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372337632546816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:50.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372337632546816 [0;39m ==> Parameters: 
2021-08-27 16:12:50.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372337632546816 [0;39m <==    Updates: 0
2021-08-27 16:12:50.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372337632546816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:12:55.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372358612455424 [0;39m 生成今日电子书快照开始
2021-08-27 16:12:55.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372358612455424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:12:55.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372358612455424 [0;39m ==> Parameters: 
2021-08-27 16:12:55.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372358612455424 [0;39m <==    Updates: 0
2021-08-27 16:12:55.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372358612455424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:13:00.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372379592364032 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:00.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372379592364032 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:00.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372379592364032 [0;39m ==> Parameters: 
2021-08-27 16:13:00.019 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372379592364032 [0;39m <==    Updates: 0
2021-08-27 16:13:00.019 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372379592364032 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:13:05.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372400509358080 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:05.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372400509358080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:05.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372400509358080 [0;39m ==> Parameters: 
2021-08-27 16:13:05.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372400509358080 [0;39m <==    Updates: 0
2021-08-27 16:13:05.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372400509358080 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:13:05.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372400526135296 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:13:05.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372400526135296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:13:05.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372400526135296 [0;39m ==> Parameters: 
2021-08-27 16:13:05.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372400526135296 [0;39m <==    Updates: 5
2021-08-27 16:13:05.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372400526135296 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:13:10.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372421489266688 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:10.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372421489266688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:10.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372421489266688 [0;39m ==> Parameters: 
2021-08-27 16:13:10.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372421489266688 [0;39m <==    Updates: 0
2021-08-27 16:13:10.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372421489266688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:13:15.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372442498535424 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:15.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372442498535424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:15.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372442498535424 [0;39m ==> Parameters: 
2021-08-27 16:13:15.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372442498535424 [0;39m <==    Updates: 0
2021-08-27 16:13:15.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372442498535424 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:13:20.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372463465861120 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:20.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372463465861120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:20.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372463465861120 [0;39m ==> Parameters: 
2021-08-27 16:13:20.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372463465861120 [0;39m <==    Updates: 0
2021-08-27 16:13:20.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372463465861120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:13:25.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372484412215296 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:25.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372484412215296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:25.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372484412215296 [0;39m ==> Parameters: 
2021-08-27 16:13:25.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372484412215296 [0;39m <==    Updates: 0
2021-08-27 16:13:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372484412215296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:13:30.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372505396318208 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372505396318208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372505396318208 [0;39m ==> Parameters: 
2021-08-27 16:13:30.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372505396318208 [0;39m <==    Updates: 0
2021-08-27 16:13:30.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372505396318208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:13:35.011 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372526372032512 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:13:35.011 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372526372032512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:13:35.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372526372032512 [0;39m ==> Parameters: 
2021-08-27 16:13:35.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372526372032512 [0;39m <==    Updates: 5
2021-08-27 16:13:35.012 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372526372032512 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:13:35.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372526380421120 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:35.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372526380421120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:35.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372526380421120 [0;39m ==> Parameters: 
2021-08-27 16:13:35.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372526380421120 [0;39m <==    Updates: 0
2021-08-27 16:13:35.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372526380421120 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:13:40.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372547335163904 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:40.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372547335163904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:40.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372547335163904 [0;39m ==> Parameters: 
2021-08-27 16:13:40.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372547335163904 [0;39m <==    Updates: 0
2021-08-27 16:13:40.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372547335163904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:13:45.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372568273129472 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:45.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372568273129472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:45.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372568273129472 [0;39m ==> Parameters: 
2021-08-27 16:13:45.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372568273129472 [0;39m <==    Updates: 0
2021-08-27 16:13:45.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372568273129472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:13:50.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372589257232384 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:50.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372589257232384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:50.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372589257232384 [0;39m ==> Parameters: 
2021-08-27 16:13:50.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372589257232384 [0;39m <==    Updates: 0
2021-08-27 16:13:50.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372589257232384 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:13:55.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372610216169472 [0;39m 生成今日电子书快照开始
2021-08-27 16:13:55.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372610216169472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:13:55.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372610216169472 [0;39m ==> Parameters: 
2021-08-27 16:13:55.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372610216169472 [0;39m <==    Updates: 0
2021-08-27 16:13:55.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372610216169472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:00.000 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372631183495168 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:00.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372631183495168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:00.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372631183495168 [0;39m ==> Parameters: 
2021-08-27 16:14:00.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372631183495168 [0;39m <==    Updates: 0
2021-08-27 16:14:00.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372631183495168 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:14:05.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372652213735424 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:05.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372652213735424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:05.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372652213735424 [0;39m ==> Parameters: 
2021-08-27 16:14:05.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372652213735424 [0;39m <==    Updates: 0
2021-08-27 16:14:05.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372652213735424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:05.016 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372652222124032 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:14:05.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372652222124032 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:14:05.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372652222124032 [0;39m ==> Parameters: 
2021-08-27 16:14:05.017 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372652222124032 [0;39m <==    Updates: 5
2021-08-27 16:14:05.017 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372652222124032 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:14:10.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372673130729472 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:10.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372673130729472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:10.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372673130729472 [0;39m ==> Parameters: 
2021-08-27 16:14:10.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372673130729472 [0;39m <==    Updates: 0
2021-08-27 16:14:10.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372673130729472 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2021-08-27 16:14:15.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372694139998208 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:15.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372694139998208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:15.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372694139998208 [0;39m ==> Parameters: 
2021-08-27 16:14:15.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372694139998208 [0;39m <==    Updates: 0
2021-08-27 16:14:15.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372694139998208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:20.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372715111518208 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:20.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372715111518208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:20.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372715111518208 [0;39m ==> Parameters: 
2021-08-27 16:14:20.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372715111518208 [0;39m <==    Updates: 0
2021-08-27 16:14:20.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372715111518208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372736078843904 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:25.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372736078843904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:25.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372736078843904 [0;39m ==> Parameters: 
2021-08-27 16:14:25.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372736078843904 [0;39m <==    Updates: 0
2021-08-27 16:14:25.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372736078843904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:30.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372757071335424 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:30.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372757071335424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:30.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372757071335424 [0;39m ==> Parameters: 
2021-08-27 16:14:30.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372757071335424 [0;39m <==    Updates: 0
2021-08-27 16:14:30.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372757071335424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:35.015 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372778047049728 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:14:35.015 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372778047049728 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:14:35.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372778047049728 [0;39m ==> Parameters: 
2021-08-27 16:14:35.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372778047049728 [0;39m <==    Updates: 5
2021-08-27 16:14:35.017 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372778047049728 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-27 16:14:35.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372778055438336 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:35.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372778055438336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:35.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372778055438336 [0;39m ==> Parameters: 
2021-08-27 16:14:35.018 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372778055438336 [0;39m <==    Updates: 0
2021-08-27 16:14:35.018 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372778055438336 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:14:40.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372798989209600 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:40.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372798989209600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:40.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372798989209600 [0;39m ==> Parameters: 
2021-08-27 16:14:40.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372798989209600 [0;39m <==    Updates: 0
2021-08-27 16:14:40.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372798989209600 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:14:45.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372819985895424 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:45.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372819985895424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:45.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372819985895424 [0;39m ==> Parameters: 
2021-08-27 16:14:45.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372819985895424 [0;39m <==    Updates: 0
2021-08-27 16:14:45.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372819985895424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:50.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372840915472384 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:50.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372840915472384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:50.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372840915472384 [0;39m ==> Parameters: 
2021-08-27 16:14:50.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372840915472384 [0;39m <==    Updates: 0
2021-08-27 16:14:50.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372840915472384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:14:55.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372861933129728 [0;39m 生成今日电子书快照开始
2021-08-27 16:14:55.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372861933129728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:14:55.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372861933129728 [0;39m ==> Parameters: 
2021-08-27 16:14:55.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372861933129728 [0;39m <==    Updates: 0
2021-08-27 16:14:55.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372861933129728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:00.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372882879483904 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372882879483904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:00.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372882879483904 [0;39m ==> Parameters: 
2021-08-27 16:15:00.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372882879483904 [0;39m <==    Updates: 0
2021-08-27 16:15:00.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372882879483904 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:15:05.004 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86372903830032384 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:15:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372903830032384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:15:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372903830032384 [0;39m ==> Parameters: 
2021-08-27 16:15:05.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86372903830032384 [0;39m <==    Updates: 5
2021-08-27 16:15:05.005 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86372903830032384 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:15:05.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372903834226688 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:05.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372903834226688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:05.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372903834226688 [0;39m ==> Parameters: 
2021-08-27 16:15:05.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372903834226688 [0;39m <==    Updates: 0
2021-08-27 16:15:05.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372903834226688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:10.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372924843495424 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:10.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372924843495424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:10.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372924843495424 [0;39m ==> Parameters: 
2021-08-27 16:15:10.020 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372924843495424 [0;39m <==    Updates: 0
2021-08-27 16:15:10.021 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372924843495424 [0;39m 生成今日电子书快照结束，耗时：7毫秒
2021-08-27 16:15:15.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372945785655296 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:15.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372945785655296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:15.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372945785655296 [0;39m ==> Parameters: 
2021-08-27 16:15:15.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372945785655296 [0;39m <==    Updates: 0
2021-08-27 16:15:15.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372945785655296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:20.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372966765563904 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:20.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372966765563904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:20.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372966765563904 [0;39m ==> Parameters: 
2021-08-27 16:15:20.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372966765563904 [0;39m <==    Updates: 0
2021-08-27 16:15:20.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372966765563904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:25.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86372987707723776 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:25.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372987707723776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:25.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372987707723776 [0;39m ==> Parameters: 
2021-08-27 16:15:25.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86372987707723776 [0;39m <==    Updates: 0
2021-08-27 16:15:25.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86372987707723776 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:30.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373008708603904 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:30.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373008708603904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:30.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373008708603904 [0;39m ==> Parameters: 
2021-08-27 16:15:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373008708603904 [0;39m <==    Updates: 0
2021-08-27 16:15:30.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373008708603904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:35.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373029671735296 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:15:35.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373029671735296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:15:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373029671735296 [0;39m ==> Parameters: 
2021-08-27 16:15:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373029671735296 [0;39m <==    Updates: 5
2021-08-27 16:15:35.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373029671735296 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:15:35.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373029680123904 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:35.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373029680123904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:35.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373029680123904 [0;39m ==> Parameters: 
2021-08-27 16:15:35.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373029680123904 [0;39m <==    Updates: 0
2021-08-27 16:15:35.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373029680123904 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:15:40.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373050672615424 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:40.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373050672615424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:40.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373050672615424 [0;39m ==> Parameters: 
2021-08-27 16:15:40.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373050672615424 [0;39m <==    Updates: 0
2021-08-27 16:15:40.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373050672615424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:45.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373071597998080 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:45.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373071597998080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:45.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373071597998080 [0;39m ==> Parameters: 
2021-08-27 16:15:45.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373071597998080 [0;39m <==    Updates: 0
2021-08-27 16:15:45.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373071597998080 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:50.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373092628238336 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:50.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373092628238336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:50.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373092628238336 [0;39m ==> Parameters: 
2021-08-27 16:15:50.018 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373092628238336 [0;39m <==    Updates: 0
2021-08-27 16:15:50.019 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373092628238336 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:15:55.000 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373113528455168 [0;39m 生成今日电子书快照开始
2021-08-27 16:15:55.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373113528455168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:15:55.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373113528455168 [0;39m ==> Parameters: 
2021-08-27 16:15:55.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373113528455168 [0;39m <==    Updates: 0
2021-08-27 16:15:55.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373113528455168 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:16:00.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373134537723904 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373134537723904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373134537723904 [0;39m ==> Parameters: 
2021-08-27 16:16:00.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373134537723904 [0;39m <==    Updates: 0
2021-08-27 16:16:00.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373134537723904 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:16:05.016 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373155538604032 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:16:05.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373155538604032 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:16:05.017 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373155538604032 [0;39m ==> Parameters: 
2021-08-27 16:16:05.017 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373155538604032 [0;39m <==    Updates: 5
2021-08-27 16:16:05.017 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373155538604032 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:16:05.018 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373155546992640 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:05.018 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373155546992640 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:05.018 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373155546992640 [0;39m ==> Parameters: 
2021-08-27 16:16:05.019 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373155546992640 [0;39m <==    Updates: 0
2021-08-27 16:16:05.019 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373155546992640 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:16:10.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373176501735424 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:10.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373176501735424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:10.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373176501735424 [0;39m ==> Parameters: 
2021-08-27 16:16:10.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373176501735424 [0;39m <==    Updates: 0
2021-08-27 16:16:10.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373176501735424 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:16:15.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373197422923776 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:15.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373197422923776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:15.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373197422923776 [0;39m ==> Parameters: 
2021-08-27 16:16:15.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373197422923776 [0;39m <==    Updates: 0
2021-08-27 16:16:15.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373197422923776 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:16:20.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373218415415296 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373218415415296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:20.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373218415415296 [0;39m ==> Parameters: 
2021-08-27 16:16:20.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373218415415296 [0;39m <==    Updates: 0
2021-08-27 16:16:20.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373218415415296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:16:25.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373239420489728 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:25.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373239420489728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:25.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373239420489728 [0;39m ==> Parameters: 
2021-08-27 16:16:25.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373239420489728 [0;39m <==    Updates: 0
2021-08-27 16:16:25.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373239420489728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:16:30.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373260387815424 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:30.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373260387815424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:30.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373260387815424 [0;39m ==> Parameters: 
2021-08-27 16:16:30.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373260387815424 [0;39m <==    Updates: 0
2021-08-27 16:16:30.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373260387815424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:16:35.001 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373281304809472 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:16:35.001 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373281304809472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:16:35.002 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373281304809472 [0;39m ==> Parameters: 
2021-08-27 16:16:35.002 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373281304809472 [0;39m <==    Updates: 5
2021-08-27 16:16:35.002 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373281304809472 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:16:35.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373281313198080 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:35.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373281313198080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:35.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373281313198080 [0;39m ==> Parameters: 
2021-08-27 16:16:35.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373281313198080 [0;39m <==    Updates: 0
2021-08-27 16:16:35.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373281313198080 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:16:40.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373302280523776 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:40.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373302280523776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:40.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373302280523776 [0;39m ==> Parameters: 
2021-08-27 16:16:40.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373302280523776 [0;39m <==    Updates: 0
2021-08-27 16:16:40.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373302280523776 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:16:45.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373323289792512 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:45.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373323289792512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:45.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373323289792512 [0;39m ==> Parameters: 
2021-08-27 16:16:45.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373323289792512 [0;39m <==    Updates: 0
2021-08-27 16:16:45.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373323289792512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:16:50.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373344261312512 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:50.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373344261312512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:50.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373344261312512 [0;39m ==> Parameters: 
2021-08-27 16:16:50.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373344261312512 [0;39m <==    Updates: 0
2021-08-27 16:16:50.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373344261312512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:16:55.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373365190889472 [0;39m 生成今日电子书快照开始
2021-08-27 16:16:55.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373365190889472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:16:55.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373365190889472 [0;39m ==> Parameters: 
2021-08-27 16:16:55.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373365190889472 [0;39m <==    Updates: 0
2021-08-27 16:16:55.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373365190889472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:00.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373386174992384 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:00.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373386174992384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:00.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373386174992384 [0;39m ==> Parameters: 
2021-08-27 16:17:00.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373386174992384 [0;39m <==    Updates: 0
2021-08-27 16:17:00.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373386174992384 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:17:05.009 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373407167483904 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:17:05.010 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373407167483904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:17:05.010 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373407167483904 [0;39m ==> Parameters: 
2021-08-27 16:17:05.011 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373407167483904 [0;39m <==    Updates: 5
2021-08-27 16:17:05.011 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373407167483904 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-27 16:17:05.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373407175872512 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:05.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373407175872512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:05.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373407175872512 [0;39m ==> Parameters: 
2021-08-27 16:17:05.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373407175872512 [0;39m <==    Updates: 0
2021-08-27 16:17:05.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373407175872512 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:17:10.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373428109643776 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:10.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373428109643776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:10.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373428109643776 [0;39m ==> Parameters: 
2021-08-27 16:17:10.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373428109643776 [0;39m <==    Updates: 0
2021-08-27 16:17:10.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373428109643776 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:15.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373449135689728 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:15.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373449135689728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:15.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373449135689728 [0;39m ==> Parameters: 
2021-08-27 16:17:15.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373449135689728 [0;39m <==    Updates: 0
2021-08-27 16:17:15.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373449135689728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:20.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373470061072384 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:20.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373470061072384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:20.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373470061072384 [0;39m ==> Parameters: 
2021-08-27 16:17:20.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373470061072384 [0;39m <==    Updates: 0
2021-08-27 16:17:20.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373470061072384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:25.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373491045175296 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:25.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373491045175296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:25.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373491045175296 [0;39m ==> Parameters: 
2021-08-27 16:17:25.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373491045175296 [0;39m <==    Updates: 0
2021-08-27 16:17:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373491045175296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:30.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373512016695296 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:30.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373512016695296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:30.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373512016695296 [0;39m ==> Parameters: 
2021-08-27 16:17:30.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373512016695296 [0;39m <==    Updates: 0
2021-08-27 16:17:30.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373512016695296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:35.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373532975632384 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:35.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373532975632384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:35.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373532975632384 [0;39m ==> Parameters: 
2021-08-27 16:17:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373532975632384 [0;39m <==    Updates: 0
2021-08-27 16:17:35.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373532975632384 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:17:35.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373532988215296 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:17:35.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373532988215296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:17:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373532988215296 [0;39m ==> Parameters: 
2021-08-27 16:17:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373532988215296 [0;39m <==    Updates: 5
2021-08-27 16:17:35.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373532988215296 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:17:40.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373553942958080 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:40.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373553942958080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:40.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373553942958080 [0;39m ==> Parameters: 
2021-08-27 16:17:40.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373553942958080 [0;39m <==    Updates: 0
2021-08-27 16:17:40.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373553942958080 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:17:45.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373574956421120 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:45.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373574956421120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:45.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373574956421120 [0;39m ==> Parameters: 
2021-08-27 16:17:45.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373574956421120 [0;39m <==    Updates: 0
2021-08-27 16:17:45.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373574956421120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:50.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373595927941120 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:50.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373595927941120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:50.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373595927941120 [0;39m ==> Parameters: 
2021-08-27 16:17:50.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373595927941120 [0;39m <==    Updates: 0
2021-08-27 16:17:50.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373595927941120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:17:55.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373616891072512 [0;39m 生成今日电子书快照开始
2021-08-27 16:17:55.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373616891072512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:17:55.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373616891072512 [0;39m ==> Parameters: 
2021-08-27 16:17:55.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373616891072512 [0;39m <==    Updates: 0
2021-08-27 16:17:55.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373616891072512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:18:00.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373637829038080 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:00.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373637829038080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:00.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373637829038080 [0;39m ==> Parameters: 
2021-08-27 16:18:00.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373637829038080 [0;39m <==    Updates: 0
2021-08-27 16:18:00.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373637829038080 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:18:05.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373658796363776 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:05.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373658796363776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:05.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373658796363776 [0;39m ==> Parameters: 
2021-08-27 16:18:05.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373658796363776 [0;39m <==    Updates: 0
2021-08-27 16:18:05.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373658796363776 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:18:05.003 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373658800558080 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:18:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373658800558080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:18:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373658800558080 [0;39m ==> Parameters: 
2021-08-27 16:18:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373658800558080 [0;39m <==    Updates: 5
2021-08-27 16:18:05.004 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373658800558080 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:18:10.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373679801438208 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373679801438208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373679801438208 [0;39m ==> Parameters: 
2021-08-27 16:18:10.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373679801438208 [0;39m <==    Updates: 0
2021-08-27 16:18:10.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373679801438208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:18:15.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373700785541120 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:15.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373700785541120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:15.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373700785541120 [0;39m ==> Parameters: 
2021-08-27 16:18:15.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373700785541120 [0;39m <==    Updates: 0
2021-08-27 16:18:15.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373700785541120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:18:20.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373721727700992 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373721727700992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373721727700992 [0;39m ==> Parameters: 
2021-08-27 16:18:20.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373721727700992 [0;39m <==    Updates: 0
2021-08-27 16:18:20.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373721727700992 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:18:25.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373742695026688 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:25.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373742695026688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:25.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373742695026688 [0;39m ==> Parameters: 
2021-08-27 16:18:25.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373742695026688 [0;39m <==    Updates: 0
2021-08-27 16:18:25.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373742695026688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:18:30.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373763708489728 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:30.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373763708489728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:30.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373763708489728 [0;39m ==> Parameters: 
2021-08-27 16:18:30.018 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373763708489728 [0;39m <==    Updates: 0
2021-08-27 16:18:30.018 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373763708489728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:18:35.006 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373784642260992 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:18:35.006 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373784642260992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:18:35.006 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373784642260992 [0;39m ==> Parameters: 
2021-08-27 16:18:35.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373784642260992 [0;39m <==    Updates: 5
2021-08-27 16:18:35.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373784642260992 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:18:35.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373784646455296 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:35.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373784646455296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:35.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373784646455296 [0;39m ==> Parameters: 
2021-08-27 16:18:35.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373784646455296 [0;39m <==    Updates: 0
2021-08-27 16:18:35.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373784646455296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:18:40.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373805592809472 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:40.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373805592809472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:40.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373805592809472 [0;39m ==> Parameters: 
2021-08-27 16:18:40.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373805592809472 [0;39m <==    Updates: 0
2021-08-27 16:18:40.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373805592809472 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:18:45.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373826623049728 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:45.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373826623049728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:45.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373826623049728 [0;39m ==> Parameters: 
2021-08-27 16:18:45.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373826623049728 [0;39m <==    Updates: 0
2021-08-27 16:18:45.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373826623049728 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:18:50.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373847565209600 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:50.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373847565209600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:50.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373847565209600 [0;39m ==> Parameters: 
2021-08-27 16:18:50.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373847565209600 [0;39m <==    Updates: 0
2021-08-27 16:18:50.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373847565209600 [0;39m 生成今日电子书快照结束，耗时：7毫秒
2021-08-27 16:18:55.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373868528340992 [0;39m 生成今日电子书快照开始
2021-08-27 16:18:55.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373868528340992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:18:55.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373868528340992 [0;39m ==> Parameters: 
2021-08-27 16:18:55.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373868528340992 [0;39m <==    Updates: 0
2021-08-27 16:18:55.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373868528340992 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:19:00.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373889537609728 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:00.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373889537609728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:00.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373889537609728 [0;39m ==> Parameters: 
2021-08-27 16:19:00.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373889537609728 [0;39m <==    Updates: 0
2021-08-27 16:19:00.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373889537609728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:05.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373910488158208 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:05.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373910488158208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:05.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373910488158208 [0;39m ==> Parameters: 
2021-08-27 16:19:05.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373910488158208 [0;39m <==    Updates: 0
2021-08-27 16:19:05.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373910488158208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:05.012 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86373910496546816 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:19:05.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373910496546816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:19:05.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373910496546816 [0;39m ==> Parameters: 
2021-08-27 16:19:05.013 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86373910496546816 [0;39m <==    Updates: 5
2021-08-27 16:19:05.013 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86373910496546816 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:19:10.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373931447095296 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:10.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373931447095296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:10.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373931447095296 [0;39m ==> Parameters: 
2021-08-27 16:19:10.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373931447095296 [0;39m <==    Updates: 0
2021-08-27 16:19:10.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373931447095296 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:19:15.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373952431198208 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:15.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373952431198208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:15.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373952431198208 [0;39m ==> Parameters: 
2021-08-27 16:19:15.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373952431198208 [0;39m <==    Updates: 0
2021-08-27 16:19:15.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373952431198208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:20.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373973415301120 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:20.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373973415301120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:20.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373973415301120 [0;39m ==> Parameters: 
2021-08-27 16:19:20.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373973415301120 [0;39m <==    Updates: 0
2021-08-27 16:19:20.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373973415301120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:25.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86373994344878080 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:25.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373994344878080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:25.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373994344878080 [0;39m ==> Parameters: 
2021-08-27 16:19:25.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86373994344878080 [0;39m <==    Updates: 0
2021-08-27 16:19:25.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86373994344878080 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:30.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374015349952512 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374015349952512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:30.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374015349952512 [0;39m ==> Parameters: 
2021-08-27 16:19:30.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374015349952512 [0;39m <==    Updates: 0
2021-08-27 16:19:30.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374015349952512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:35.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374036296306688 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:35.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374036296306688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374036296306688 [0;39m ==> Parameters: 
2021-08-27 16:19:35.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374036296306688 [0;39m <==    Updates: 0
2021-08-27 16:19:35.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374036296306688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:35.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374036304695296 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:19:35.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374036304695296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:19:35.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374036304695296 [0;39m ==> Parameters: 
2021-08-27 16:19:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374036304695296 [0;39m <==    Updates: 5
2021-08-27 16:19:35.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374036304695296 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:19:40.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374057267826688 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:40.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374057267826688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:40.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374057267826688 [0;39m ==> Parameters: 
2021-08-27 16:19:40.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374057267826688 [0;39m <==    Updates: 0
2021-08-27 16:19:40.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374057267826688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:45.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374078272901120 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:45.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374078272901120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:45.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374078272901120 [0;39m ==> Parameters: 
2021-08-27 16:19:45.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374078272901120 [0;39m <==    Updates: 0
2021-08-27 16:19:45.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374078272901120 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:19:50.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374099223449600 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:50.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374099223449600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:50.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374099223449600 [0;39m ==> Parameters: 
2021-08-27 16:19:50.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374099223449600 [0;39m <==    Updates: 0
2021-08-27 16:19:50.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374099223449600 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:19:55.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374120224329728 [0;39m 生成今日电子书快照开始
2021-08-27 16:19:55.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374120224329728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:19:55.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374120224329728 [0;39m ==> Parameters: 
2021-08-27 16:19:55.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374120224329728 [0;39m <==    Updates: 0
2021-08-27 16:19:55.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374120224329728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:00.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374141153906688 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:00.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374141153906688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:00.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374141153906688 [0;39m ==> Parameters: 
2021-08-27 16:20:00.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374141153906688 [0;39m <==    Updates: 0
2021-08-27 16:20:00.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374141153906688 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:20:05.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374162133815296 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:20:05.007 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374162133815296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:20:05.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374162133815296 [0;39m ==> Parameters: 
2021-08-27 16:20:05.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374162133815296 [0;39m <==    Updates: 5
2021-08-27 16:20:05.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374162133815296 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:20:05.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374162138009600 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:05.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374162138009600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:05.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374162138009600 [0;39m ==> Parameters: 
2021-08-27 16:20:05.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374162138009600 [0;39m <==    Updates: 0
2021-08-27 16:20:05.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374162138009600 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:20:10.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374183117918208 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:10.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374183117918208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374183117918208 [0;39m ==> Parameters: 
2021-08-27 16:20:10.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374183117918208 [0;39m <==    Updates: 0
2021-08-27 16:20:10.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374183117918208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:15.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374204085243904 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:15.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374204085243904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:15.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374204085243904 [0;39m ==> Parameters: 
2021-08-27 16:20:15.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374204085243904 [0;39m <==    Updates: 0
2021-08-27 16:20:15.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374204085243904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:20.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374225056763904 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:20.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374225056763904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:20.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374225056763904 [0;39m ==> Parameters: 
2021-08-27 16:20:20.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374225056763904 [0;39m <==    Updates: 0
2021-08-27 16:20:20.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374225056763904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:25.000 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374245990535168 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:25.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374245990535168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:25.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374245990535168 [0;39m ==> Parameters: 
2021-08-27 16:20:25.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374245990535168 [0;39m <==    Updates: 0
2021-08-27 16:20:25.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374245990535168 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:30.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374266999803904 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:30.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374266999803904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:30.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374266999803904 [0;39m ==> Parameters: 
2021-08-27 16:20:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374266999803904 [0;39m <==    Updates: 0
2021-08-27 16:20:30.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374266999803904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:35.004 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374287950352384 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:20:35.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374287950352384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:20:35.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374287950352384 [0;39m ==> Parameters: 
2021-08-27 16:20:35.006 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374287950352384 [0;39m <==    Updates: 5
2021-08-27 16:20:35.006 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374287950352384 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:20:35.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374287958740992 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374287958740992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374287958740992 [0;39m ==> Parameters: 
2021-08-27 16:20:35.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374287958740992 [0;39m <==    Updates: 0
2021-08-27 16:20:35.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374287958740992 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:40.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374308934455296 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:40.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374308934455296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:40.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374308934455296 [0;39m ==> Parameters: 
2021-08-27 16:20:40.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374308934455296 [0;39m <==    Updates: 0
2021-08-27 16:20:40.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374308934455296 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:20:45.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374329897586688 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:45.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374329897586688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:45.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374329897586688 [0;39m ==> Parameters: 
2021-08-27 16:20:45.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374329897586688 [0;39m <==    Updates: 0
2021-08-27 16:20:45.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374329897586688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:20:50.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374350881689600 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:50.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374350881689600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:50.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374350881689600 [0;39m ==> Parameters: 
2021-08-27 16:20:50.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374350881689600 [0;39m <==    Updates: 0
2021-08-27 16:20:50.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374350881689600 [0;39m 生成今日电子书快照结束，耗时：7毫秒
2021-08-27 16:20:55.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374371840626688 [0;39m 生成今日电子书快照开始
2021-08-27 16:20:55.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374371840626688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:20:55.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374371840626688 [0;39m ==> Parameters: 
2021-08-27 16:20:55.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374371840626688 [0;39m <==    Updates: 0
2021-08-27 16:20:55.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374371840626688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:00.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374392833118208 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374392833118208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374392833118208 [0;39m ==> Parameters: 
2021-08-27 16:21:00.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374392833118208 [0;39m <==    Updates: 0
2021-08-27 16:21:00.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374392833118208 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:21:05.010 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374413804638208 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:21:05.010 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374413804638208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:21:05.011 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374413804638208 [0;39m ==> Parameters: 
2021-08-27 16:21:05.011 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374413804638208 [0;39m <==    Updates: 5
2021-08-27 16:21:05.012 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374413804638208 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-27 16:21:05.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374413813026816 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:05.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374413813026816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:05.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374413813026816 [0;39m ==> Parameters: 
2021-08-27 16:21:05.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374413813026816 [0;39m <==    Updates: 0
2021-08-27 16:21:05.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374413813026816 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:21:10.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374434780352512 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374434780352512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374434780352512 [0;39m ==> Parameters: 
2021-08-27 16:21:10.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374434780352512 [0;39m <==    Updates: 0
2021-08-27 16:21:10.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374434780352512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:15.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374455730900992 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:15.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374455730900992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:15.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374455730900992 [0;39m ==> Parameters: 
2021-08-27 16:21:15.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374455730900992 [0;39m <==    Updates: 0
2021-08-27 16:21:15.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374455730900992 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:20.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374476715003904 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:20.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374476715003904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:20.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374476715003904 [0;39m ==> Parameters: 
2021-08-27 16:21:20.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374476715003904 [0;39m <==    Updates: 0
2021-08-27 16:21:20.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374476715003904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:25.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374497678135296 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:25.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374497678135296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:25.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374497678135296 [0;39m ==> Parameters: 
2021-08-27 16:21:25.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374497678135296 [0;39m <==    Updates: 0
2021-08-27 16:21:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374497678135296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:30.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374518679015424 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:30.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374518679015424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:30.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374518679015424 [0;39m ==> Parameters: 
2021-08-27 16:21:30.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374518679015424 [0;39m <==    Updates: 0
2021-08-27 16:21:30.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374518679015424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:35.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374539642146816 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:35.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374539642146816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:35.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374539642146816 [0;39m ==> Parameters: 
2021-08-27 16:21:35.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374539642146816 [0;39m <==    Updates: 0
2021-08-27 16:21:35.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374539642146816 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:21:35.013 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374539646341120 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:21:35.013 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374539646341120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:21:35.013 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374539646341120 [0;39m ==> Parameters: 
2021-08-27 16:21:35.014 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374539646341120 [0;39m <==    Updates: 5
2021-08-27 16:21:35.014 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374539646341120 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:21:40.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374560622055424 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:40.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374560622055424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:40.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374560622055424 [0;39m ==> Parameters: 
2021-08-27 16:21:40.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374560622055424 [0;39m <==    Updates: 0
2021-08-27 16:21:40.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374560622055424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:45.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374581560020992 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:45.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374581560020992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:45.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374581560020992 [0;39m ==> Parameters: 
2021-08-27 16:21:45.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374581560020992 [0;39m <==    Updates: 0
2021-08-27 16:21:45.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374581560020992 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:50.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374602518958080 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:50.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374602518958080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:50.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374602518958080 [0;39m ==> Parameters: 
2021-08-27 16:21:50.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374602518958080 [0;39m <==    Updates: 0
2021-08-27 16:21:50.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374602518958080 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:21:55.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374623494672384 [0;39m 生成今日电子书快照开始
2021-08-27 16:21:55.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374623494672384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:21:55.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374623494672384 [0;39m ==> Parameters: 
2021-08-27 16:21:55.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374623494672384 [0;39m <==    Updates: 0
2021-08-27 16:21:55.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374623494672384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:00.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374644487163904 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374644487163904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374644487163904 [0;39m ==> Parameters: 
2021-08-27 16:22:00.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374644487163904 [0;39m <==    Updates: 0
2021-08-27 16:22:00.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374644487163904 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:22:05.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374665462878208 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:05.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374665462878208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:05.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374665462878208 [0;39m ==> Parameters: 
2021-08-27 16:22:05.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374665462878208 [0;39m <==    Updates: 0
2021-08-27 16:22:05.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374665462878208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:05.012 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374665471266816 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:22:05.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374665471266816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:22:05.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374665471266816 [0;39m ==> Parameters: 
2021-08-27 16:22:05.013 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374665471266816 [0;39m <==    Updates: 5
2021-08-27 16:22:05.013 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374665471266816 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:22:10.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374686434398208 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:10.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374686434398208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:10.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374686434398208 [0;39m ==> Parameters: 
2021-08-27 16:22:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374686434398208 [0;39m <==    Updates: 0
2021-08-27 16:22:10.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374686434398208 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:22:15.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374707372363776 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:15.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374707372363776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:15.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374707372363776 [0;39m ==> Parameters: 
2021-08-27 16:22:15.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374707372363776 [0;39m <==    Updates: 0
2021-08-27 16:22:15.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374707372363776 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:20.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374728356466688 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:20.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374728356466688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:20.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374728356466688 [0;39m ==> Parameters: 
2021-08-27 16:22:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374728356466688 [0;39m <==    Updates: 0
2021-08-27 16:22:20.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374728356466688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:25.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374749340569600 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:25.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374749340569600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:25.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374749340569600 [0;39m ==> Parameters: 
2021-08-27 16:22:25.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374749340569600 [0;39m <==    Updates: 0
2021-08-27 16:22:25.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374749340569600 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:30.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374770337255424 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:30.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374770337255424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:30.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374770337255424 [0;39m ==> Parameters: 
2021-08-27 16:22:30.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374770337255424 [0;39m <==    Updates: 0
2021-08-27 16:22:30.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374770337255424 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:22:35.000 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374791250055168 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:35.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374791250055168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:35.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374791250055168 [0;39m ==> Parameters: 
2021-08-27 16:22:35.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374791250055168 [0;39m <==    Updates: 0
2021-08-27 16:22:35.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374791250055168 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:35.002 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374791258443776 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:22:35.002 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374791258443776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:22:35.002 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374791258443776 [0;39m ==> Parameters: 
2021-08-27 16:22:35.003 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374791258443776 [0;39m <==    Updates: 5
2021-08-27 16:22:35.003 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374791258443776 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:22:40.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374812242546688 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:40.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374812242546688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:40.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374812242546688 [0;39m ==> Parameters: 
2021-08-27 16:22:40.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374812242546688 [0;39m <==    Updates: 0
2021-08-27 16:22:40.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374812242546688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:45.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374833209872384 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:45.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374833209872384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:45.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374833209872384 [0;39m ==> Parameters: 
2021-08-27 16:22:45.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374833209872384 [0;39m <==    Updates: 0
2021-08-27 16:22:45.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374833209872384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:50.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374854219141120 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:50.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374854219141120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:50.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374854219141120 [0;39m ==> Parameters: 
2021-08-27 16:22:50.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374854219141120 [0;39m <==    Updates: 0
2021-08-27 16:22:50.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374854219141120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:22:55.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374875186466816 [0;39m 生成今日电子书快照开始
2021-08-27 16:22:55.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374875186466816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:22:55.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374875186466816 [0;39m ==> Parameters: 
2021-08-27 16:22:55.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374875186466816 [0;39m <==    Updates: 0
2021-08-27 16:22:55.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374875186466816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:23:00.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374896145403904 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374896145403904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374896145403904 [0;39m ==> Parameters: 
2021-08-27 16:23:00.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374896145403904 [0;39m <==    Updates: 0
2021-08-27 16:23:00.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374896145403904 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:23:05.005 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86374917100146688 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:23:05.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374917100146688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:23:05.006 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374917100146688 [0;39m ==> Parameters: 
2021-08-27 16:23:05.006 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86374917100146688 [0;39m <==    Updates: 5
2021-08-27 16:23:05.006 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86374917100146688 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:23:05.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374917108535296 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:05.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374917108535296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:05.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374917108535296 [0;39m ==> Parameters: 
2021-08-27 16:23:05.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374917108535296 [0;39m <==    Updates: 0
2021-08-27 16:23:05.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374917108535296 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:23:10.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374938101026816 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:10.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374938101026816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:10.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374938101026816 [0;39m ==> Parameters: 
2021-08-27 16:23:10.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374938101026816 [0;39m <==    Updates: 0
2021-08-27 16:23:10.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374938101026816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:23:15.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374959055769600 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:15.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374959055769600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:15.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374959055769600 [0;39m ==> Parameters: 
2021-08-27 16:23:15.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374959055769600 [0;39m <==    Updates: 0
2021-08-27 16:23:15.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374959055769600 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:23:20.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86374980010512384 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:20.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374980010512384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:20.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374980010512384 [0;39m ==> Parameters: 
2021-08-27 16:23:20.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86374980010512384 [0;39m <==    Updates: 0
2021-08-27 16:23:20.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86374980010512384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:23:25.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375001023975424 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:25.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375001023975424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:25.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375001023975424 [0;39m ==> Parameters: 
2021-08-27 16:23:25.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375001023975424 [0;39m <==    Updates: 0
2021-08-27 16:23:25.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375001023975424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:23:30.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375021949358080 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:30.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375021949358080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:30.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375021949358080 [0;39m ==> Parameters: 
2021-08-27 16:23:30.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375021949358080 [0;39m <==    Updates: 0
2021-08-27 16:23:30.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375021949358080 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:23:35.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375042941849600 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:23:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375042941849600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:23:35.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375042941849600 [0;39m ==> Parameters: 
2021-08-27 16:23:35.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375042941849600 [0;39m <==    Updates: 5
2021-08-27 16:23:35.010 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375042941849600 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-27 16:23:35.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375042950238208 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:35.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375042950238208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:35.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375042950238208 [0;39m ==> Parameters: 
2021-08-27 16:23:35.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375042950238208 [0;39m <==    Updates: 0
2021-08-27 16:23:35.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375042950238208 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:23:40.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375063909175296 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:40.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375063909175296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:40.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375063909175296 [0;39m ==> Parameters: 
2021-08-27 16:23:40.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375063909175296 [0;39m <==    Updates: 0
2021-08-27 16:23:40.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375063909175296 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:23:45.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375084868112384 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:45.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375084868112384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:45.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375084868112384 [0;39m ==> Parameters: 
2021-08-27 16:23:45.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375084868112384 [0;39m <==    Updates: 0
2021-08-27 16:23:45.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375084868112384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:23:50.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375105843826688 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:50.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375105843826688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:50.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375105843826688 [0;39m ==> Parameters: 
2021-08-27 16:23:50.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375105843826688 [0;39m <==    Updates: 0
2021-08-27 16:23:50.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375105843826688 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:23:55.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375126844706816 [0;39m 生成今日电子书快照开始
2021-08-27 16:23:55.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375126844706816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:23:55.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375126844706816 [0;39m ==> Parameters: 
2021-08-27 16:23:55.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375126844706816 [0;39m <==    Updates: 0
2021-08-27 16:23:55.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375126844706816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:00.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375147786866688 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:00.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375147786866688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:00.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375147786866688 [0;39m ==> Parameters: 
2021-08-27 16:24:00.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375147786866688 [0;39m <==    Updates: 0
2021-08-27 16:24:00.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375147786866688 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:24:05.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375168791941120 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:05.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375168791941120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:05.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375168791941120 [0;39m ==> Parameters: 
2021-08-27 16:24:05.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375168791941120 [0;39m <==    Updates: 0
2021-08-27 16:24:05.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375168791941120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:05.015 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375168800329728 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:24:05.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375168800329728 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:24:05.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375168800329728 [0;39m ==> Parameters: 
2021-08-27 16:24:05.016 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375168800329728 [0;39m <==    Updates: 5
2021-08-27 16:24:05.017 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375168800329728 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-27 16:24:10.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375189759266816 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:10.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375189759266816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:10.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375189759266816 [0;39m ==> Parameters: 
2021-08-27 16:24:10.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375189759266816 [0;39m <==    Updates: 0
2021-08-27 16:24:10.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375189759266816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:15.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375210714009600 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:15.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375210714009600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:15.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375210714009600 [0;39m ==> Parameters: 
2021-08-27 16:24:15.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375210714009600 [0;39m <==    Updates: 0
2021-08-27 16:24:15.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375210714009600 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:20.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375231702306816 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:20.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375231702306816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:20.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375231702306816 [0;39m ==> Parameters: 
2021-08-27 16:24:20.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375231702306816 [0;39m <==    Updates: 0
2021-08-27 16:24:20.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375231702306816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:25.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375252669632512 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:25.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375252669632512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:25.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375252669632512 [0;39m ==> Parameters: 
2021-08-27 16:24:25.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375252669632512 [0;39m <==    Updates: 0
2021-08-27 16:24:25.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375252669632512 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:24:30.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375273653735424 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:30.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375273653735424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:30.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375273653735424 [0;39m ==> Parameters: 
2021-08-27 16:24:30.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375273653735424 [0;39m <==    Updates: 0
2021-08-27 16:24:30.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375273653735424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:35.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375294587506688 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375294587506688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375294587506688 [0;39m ==> Parameters: 
2021-08-27 16:24:35.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375294587506688 [0;39m <==    Updates: 0
2021-08-27 16:24:35.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375294587506688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:35.007 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375294595895296 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:24:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375294595895296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:24:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375294595895296 [0;39m ==> Parameters: 
2021-08-27 16:24:35.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375294595895296 [0;39m <==    Updates: 5
2021-08-27 16:24:35.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375294595895296 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:24:40.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375315579998208 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:40.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375315579998208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:40.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375315579998208 [0;39m ==> Parameters: 
2021-08-27 16:24:40.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375315579998208 [0;39m <==    Updates: 0
2021-08-27 16:24:40.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375315579998208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:45.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375336551518208 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:45.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375336551518208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:45.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375336551518208 [0;39m ==> Parameters: 
2021-08-27 16:24:45.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375336551518208 [0;39m <==    Updates: 0
2021-08-27 16:24:45.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375336551518208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:24:50.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375357527232512 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:50.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375357527232512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:50.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375357527232512 [0;39m ==> Parameters: 
2021-08-27 16:24:50.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375357527232512 [0;39m <==    Updates: 0
2021-08-27 16:24:50.018 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375357527232512 [0;39m 生成今日电子书快照结束，耗时：7毫秒
2021-08-27 16:24:55.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375378469392384 [0;39m 生成今日电子书快照开始
2021-08-27 16:24:55.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375378469392384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:24:55.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375378469392384 [0;39m ==> Parameters: 
2021-08-27 16:24:55.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375378469392384 [0;39m <==    Updates: 0
2021-08-27 16:24:55.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375378469392384 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:00.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375399428329472 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:00.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375399428329472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:00.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375399428329472 [0;39m ==> Parameters: 
2021-08-27 16:25:00.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375399428329472 [0;39m <==    Updates: 0
2021-08-27 16:25:00.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375399428329472 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:25:05.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375420420820992 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:05.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375420420820992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:05.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375420420820992 [0;39m ==> Parameters: 
2021-08-27 16:25:05.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375420420820992 [0;39m <==    Updates: 0
2021-08-27 16:25:05.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375420420820992 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:25:05.009 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375420433403904 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:25:05.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375420433403904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:25:05.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375420433403904 [0;39m ==> Parameters: 
2021-08-27 16:25:05.010 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375420433403904 [0;39m <==    Updates: 5
2021-08-27 16:25:05.010 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375420433403904 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:25:10.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375441404923904 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:10.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375441404923904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:10.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375441404923904 [0;39m ==> Parameters: 
2021-08-27 16:25:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375441404923904 [0;39m <==    Updates: 0
2021-08-27 16:25:10.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375441404923904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:15.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375462376443904 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:15.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375462376443904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:15.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375462376443904 [0;39m ==> Parameters: 
2021-08-27 16:25:15.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375462376443904 [0;39m <==    Updates: 0
2021-08-27 16:25:15.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375462376443904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:20.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375483335380992 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375483335380992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375483335380992 [0;39m ==> Parameters: 
2021-08-27 16:25:20.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375483335380992 [0;39m <==    Updates: 0
2021-08-27 16:25:20.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375483335380992 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:25.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375504319483904 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:25.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375504319483904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:25.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375504319483904 [0;39m ==> Parameters: 
2021-08-27 16:25:25.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375504319483904 [0;39m <==    Updates: 0
2021-08-27 16:25:25.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375504319483904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:30.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375525295198208 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375525295198208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:30.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375525295198208 [0;39m ==> Parameters: 
2021-08-27 16:25:30.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375525295198208 [0;39m <==    Updates: 0
2021-08-27 16:25:30.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375525295198208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:35.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375546237358080 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:35.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375546237358080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:35.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375546237358080 [0;39m ==> Parameters: 
2021-08-27 16:25:35.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375546237358080 [0;39m <==    Updates: 0
2021-08-27 16:25:35.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375546237358080 [0;39m 生成今日电子书快照结束，耗时：7毫秒
2021-08-27 16:25:35.011 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375546270912512 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:25:35.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375546270912512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:25:35.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375546270912512 [0;39m ==> Parameters: 
2021-08-27 16:25:35.015 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375546270912512 [0;39m <==    Updates: 5
2021-08-27 16:25:35.015 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375546270912512 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2021-08-27 16:25:40.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375567204683776 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:40.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375567204683776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:40.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375567204683776 [0;39m ==> Parameters: 
2021-08-27 16:25:40.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375567204683776 [0;39m <==    Updates: 0
2021-08-27 16:25:40.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375567204683776 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:45.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375588234924032 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:45.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375588234924032 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:45.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375588234924032 [0;39m ==> Parameters: 
2021-08-27 16:25:45.019 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375588234924032 [0;39m <==    Updates: 0
2021-08-27 16:25:45.019 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375588234924032 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:25:50.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375609168695296 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:50.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375609168695296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:50.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375609168695296 [0;39m ==> Parameters: 
2021-08-27 16:25:50.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375609168695296 [0;39m <==    Updates: 0
2021-08-27 16:25:50.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375609168695296 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:25:51.894 INFO  com.haoyu.knowlagebase.websocket.WebSocketServer  :33   [32m86372297656635392 [0;39m 有新连接：token：dp3Bdsqrpt，session id：1，当前连接数：2
2021-08-27 16:25:51.910 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86375617150455810 [0;39m ------------- 开始 -------------
2021-08-27 16:25:51.910 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86375617150455809 [0;39m ------------- 开始 -------------
2021-08-27 16:25:51.910 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86375617150455808 [0;39m ------------- 开始 -------------
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86375617150455809 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86375617150455808 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86375617150455810 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86375617150455809 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.get30Statistic
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86375617150455810 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.getStatistic
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86375617150455808 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86375617150455809 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86375617150455810 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86375617150455809 [0;39m 请求参数: []
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86375617150455808 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86375617150455810 [0;39m 请求参数: []
2021-08-27 16:25:51.911 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86375617150455808 [0;39m 请求参数: []
2021-08-27 16:25:51.912 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86375617150455810 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:25:51.912 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86375617150455809 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:25:51.912 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86375617150455808 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:25:51.912 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86375617150455809 [0;39m ==> Parameters: 
2021-08-27 16:25:51.912 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86375617150455810 [0;39m ==> Parameters: 
2021-08-27 16:25:51.912 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86375617150455808 [0;39m ==> Parameters: 
2021-08-27 16:25:51.913 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86375617150455810 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-08-27 16:25:51.913 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86375617150455809 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-08-27 16:25:51.913 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:25:51.913 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:25:51.913 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86375617150455809 [0;39m <==        Row: 2021-08-26, 62, 19
2021-08-27 16:25:51.913 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86375617150455810 [0;39m <==        Row: 2021-08-26, 62, 19, 62, 19
2021-08-27 16:25:51.914 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:25:51.914 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86375617150455809 [0;39m <==      Total: 1
2021-08-27 16:25:51.914 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86375617150455810 [0;39m <==        Row: 2021-08-27, 62, 19, 0, 0
2021-08-27 16:25:51.914 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:25:51.914 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86375617150455810 [0;39m <==      Total: 2
2021-08-27 16:25:51.914 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86375617150455809 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":0,"viewIncrease":62,"voteCount":0,"voteIncrease":19}],"success":true}
2021-08-27 16:25:51.914 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:25:51.914 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86375617150455809 [0;39m ------------- 结束 耗时：4 ms -------------
2021-08-27 16:25:51.914 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:25:51.914 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86375617150455810 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":62,"viewIncrease":62,"voteCount":19,"voteIncrease":19},{"date":1629993600000,"viewCount":62,"viewIncrease":0,"voteCount":19,"voteIncrease":0}],"success":true}
2021-08-27 16:25:51.915 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86375617150455810 [0;39m ------------- 结束 耗时：5 ms -------------
2021-08-27 16:25:51.915 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:25:51.915 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:25:51.915 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:25:51.915 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:25:51.915 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:25:51.915 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:25:51.916 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:25:51.916 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:25:51.916 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:25:51.916 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:25:51.917 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86375617150455808 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:25:51.917 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86375617150455808 [0;39m <==      Total: 16
2021-08-27 16:25:51.918 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86375617150455808 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:25:51.918 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86375617150455808 [0;39m ------------- 结束 耗时：8 ms -------------
2021-08-27 16:25:55.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375630148603904 [0;39m 生成今日电子书快照开始
2021-08-27 16:25:55.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375630148603904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:25:55.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375630148603904 [0;39m ==> Parameters: 
2021-08-27 16:25:55.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375630148603904 [0;39m <==    Updates: 0
2021-08-27 16:25:55.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375630148603904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:00.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375651120123904 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:00.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375651120123904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:00.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375651120123904 [0;39m ==> Parameters: 
2021-08-27 16:26:00.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375651120123904 [0;39m <==    Updates: 0
2021-08-27 16:26:00.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375651120123904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:05.006 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375672079060992 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:26:05.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375672079060992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:26:05.008 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375672079060992 [0;39m ==> Parameters: 
2021-08-27 16:26:05.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375672079060992 [0;39m <==    Updates: 5
2021-08-27 16:26:05.009 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375672079060992 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2021-08-27 16:26:05.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375672091643904 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:05.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375672091643904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:05.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375672091643904 [0;39m ==> Parameters: 
2021-08-27 16:26:05.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375672091643904 [0;39m <==    Updates: 0
2021-08-27 16:26:05.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375672091643904 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:10.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375693029609472 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:10.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375693029609472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:10.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375693029609472 [0;39m ==> Parameters: 
2021-08-27 16:26:10.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375693029609472 [0;39m <==    Updates: 0
2021-08-27 16:26:10.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375693029609472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:15.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375714001129472 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:15.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375714001129472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:15.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375714001129472 [0;39m ==> Parameters: 
2021-08-27 16:26:15.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375714001129472 [0;39m <==    Updates: 0
2021-08-27 16:26:15.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375714001129472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:20.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375734997815296 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375734997815296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:20.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375734997815296 [0;39m ==> Parameters: 
2021-08-27 16:26:20.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375734997815296 [0;39m <==    Updates: 0
2021-08-27 16:26:20.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375734997815296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:25.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375755944169472 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:25.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375755944169472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:25.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375755944169472 [0;39m ==> Parameters: 
2021-08-27 16:26:25.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375755944169472 [0;39m <==    Updates: 0
2021-08-27 16:26:25.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375755944169472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:30.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375776936660992 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:30.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375776936660992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:30.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375776936660992 [0;39m ==> Parameters: 
2021-08-27 16:26:30.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375776936660992 [0;39m <==    Updates: 0
2021-08-27 16:26:30.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375776936660992 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:26:35.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375797912375296 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:35.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375797912375296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:35.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375797912375296 [0;39m ==> Parameters: 
2021-08-27 16:26:35.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375797912375296 [0;39m <==    Updates: 0
2021-08-27 16:26:35.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375797912375296 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:26:35.008 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375797916569600 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:26:35.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375797916569600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:26:35.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375797916569600 [0;39m ==> Parameters: 
2021-08-27 16:26:35.009 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375797916569600 [0;39m <==    Updates: 5
2021-08-27 16:26:35.010 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375797916569600 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:26:40.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375818917449728 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:40.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375818917449728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:40.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375818917449728 [0;39m ==> Parameters: 
2021-08-27 16:26:40.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375818917449728 [0;39m <==    Updates: 0
2021-08-27 16:26:40.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375818917449728 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:26:45.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375839884775424 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:45.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375839884775424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:45.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375839884775424 [0;39m ==> Parameters: 
2021-08-27 16:26:45.018 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375839884775424 [0;39m <==    Updates: 0
2021-08-27 16:26:45.018 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375839884775424 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2021-08-27 16:26:50.000 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375860797575168 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:50.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375860797575168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:50.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375860797575168 [0;39m ==> Parameters: 
2021-08-27 16:26:50.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375860797575168 [0;39m <==    Updates: 0
2021-08-27 16:26:50.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375860797575168 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:26:50.576 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :32   [32m86372304312995841 [0;39m ------------- LoginInterceptor 开始 -------------
2021-08-27 16:26:50.576 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :68   [32m86372304312995841 [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2021-08-27 16:26:50.578 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :32   [32m86372304308801536 [0;39m ------------- LoginInterceptor 开始 -------------
2021-08-27 16:26:50.578 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :43   [32m86372304308801536 [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/logout/86371772408139776
2021-08-27 16:26:50.578 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :47   [32m86372304308801536 [0;39m 登录校验开始，token：86371772408139776
2021-08-27 16:26:50.580 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :59   [32m86372304308801536 [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"86371772408139776"}
2021-08-27 16:26:50.586 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86375863255437312 [0;39m ------------- 开始 -------------
2021-08-27 16:26:50.586 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86375863255437312 [0;39m 请求地址: http://127.0.0.1:8880/user/logout/86371772408139776 GET
2021-08-27 16:26:50.586 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86375863255437312 [0;39m 类名方法: com.haoyu.knowlagebase.controller.UserController.logout
2021-08-27 16:26:50.586 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86375863255437312 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:26:50.586 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86375863255437312 [0;39m 请求参数: ["86371772408139776"]
2021-08-27 16:26:50.588 INFO  com.haoyu.knowlagebase.controller.UserController  :93   [32m86375863255437312 [0;39m 从redis中删除token: 86371772408139776
2021-08-27 16:26:50.589 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86375863255437312 [0;39m 返回结果: {"success":true}
2021-08-27 16:26:50.589 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86375863255437312 [0;39m ------------- 结束 耗时：3 ms -------------
2021-08-27 16:26:50.590 INFO  c.haoyu.knowlagebase.interceptor.LoginInterceptor :68   [32m86375863255437312 [0;39m ------------- LoginInterceptor 结束 耗时：12 ms -------------
2021-08-27 16:26:52.855 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86375872772313088 [0;39m ------------- 开始 -------------
2021-08-27 16:26:52.855 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86375872772313088 [0;39m 请求地址: http://127.0.0.1:8880/user/login POST
2021-08-27 16:26:52.855 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86375872772313088 [0;39m 类名方法: com.haoyu.knowlagebase.controller.UserController.login
2021-08-27 16:26:52.855 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86375872772313088 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:26:52.855 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86375872772313088 [0;39m 请求参数: [{"loginName":"test"}]
2021-08-27 16:26:52.857 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86375872772313088 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2021-08-27 16:26:52.857 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86375872772313088 [0;39m ==> Parameters: test(String)
2021-08-27 16:26:52.858 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86375872772313088 [0;39m <==    Columns: id, login_name, name, password
2021-08-27 16:26:52.858 TRACE c.h.knowlagebase.mapper.UserMapper.selectByExample:143  [32m86375872772313088 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2021-08-27 16:26:52.858 DEBUG c.h.knowlagebase.mapper.UserMapper.selectByExample:137  [32m86375872772313088 [0;39m <==      Total: 1
2021-08-27 16:26:52.859 INFO  com.haoyu.knowlagebase.controller.UserController  :81   [32m86375872772313088 [0;39m 生成单点登录token：86375872789090304，并放入redis中
2021-08-27 16:26:52.860 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86375872772313088 [0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"测试","token":"86375872789090304"},"success":true}
2021-08-27 16:26:52.860 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86375872772313088 [0;39m ------------- 结束 耗时：5 ms -------------
2021-08-27 16:26:55.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375881802649600 [0;39m 生成今日电子书快照开始
2021-08-27 16:26:55.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375881802649600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:26:55.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375881802649600 [0;39m ==> Parameters: 
2021-08-27 16:26:55.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375881802649600 [0;39m <==    Updates: 0
2021-08-27 16:26:55.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375881802649600 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:00.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375902790946816 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:00.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375902790946816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:00.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375902790946816 [0;39m ==> Parameters: 
2021-08-27 16:27:00.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375902790946816 [0;39m <==    Updates: 0
2021-08-27 16:27:00.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375902790946816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:05.014 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86375923770855424 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:27:05.014 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375923770855424 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:27:05.014 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375923770855424 [0;39m ==> Parameters: 
2021-08-27 16:27:05.015 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86375923770855424 [0;39m <==    Updates: 5
2021-08-27 16:27:05.015 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86375923770855424 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:27:05.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375923775049728 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:05.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375923775049728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:05.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375923775049728 [0;39m ==> Parameters: 
2021-08-27 16:27:05.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375923775049728 [0;39m <==    Updates: 0
2021-08-27 16:27:05.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375923775049728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:10.000 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375944683655168 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:10.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375944683655168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:10.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375944683655168 [0;39m ==> Parameters: 
2021-08-27 16:27:10.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375944683655168 [0;39m <==    Updates: 0
2021-08-27 16:27:10.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375944683655168 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:15.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375965718089728 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:15.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375965718089728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:15.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375965718089728 [0;39m ==> Parameters: 
2021-08-27 16:27:15.017 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375965718089728 [0;39m <==    Updates: 0
2021-08-27 16:27:15.017 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375965718089728 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:20.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86375986668638208 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:20.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375986668638208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:20.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375986668638208 [0;39m ==> Parameters: 
2021-08-27 16:27:20.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86375986668638208 [0;39m <==    Updates: 0
2021-08-27 16:27:20.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86375986668638208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:25.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376007619186688 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:25.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376007619186688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:25.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376007619186688 [0;39m ==> Parameters: 
2021-08-27 16:27:25.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376007619186688 [0;39m <==    Updates: 0
2021-08-27 16:27:25.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376007619186688 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:27:30.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376028590706688 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:30.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376028590706688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:30.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376028590706688 [0;39m ==> Parameters: 
2021-08-27 16:27:30.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376028590706688 [0;39m <==    Updates: 0
2021-08-27 16:27:30.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376028590706688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:35.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376049583198208 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:35.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376049583198208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:35.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376049583198208 [0;39m ==> Parameters: 
2021-08-27 16:27:35.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376049583198208 [0;39m <==    Updates: 0
2021-08-27 16:27:35.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376049583198208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:35.012 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86376049591586816 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:27:35.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376049591586816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:27:35.012 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376049591586816 [0;39m ==> Parameters: 
2021-08-27 16:27:35.013 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376049591586816 [0;39m <==    Updates: 5
2021-08-27 16:27:35.013 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86376049591586816 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:27:40.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376070563106816 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:40.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376070563106816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:40.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376070563106816 [0;39m ==> Parameters: 
2021-08-27 16:27:40.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376070563106816 [0;39m <==    Updates: 0
2021-08-27 16:27:40.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376070563106816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:45.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376091538821120 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:45.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376091538821120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:45.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376091538821120 [0;39m ==> Parameters: 
2021-08-27 16:27:45.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376091538821120 [0;39m <==    Updates: 0
2021-08-27 16:27:45.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376091538821120 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:27:45.115 INFO  com.haoyu.knowlagebase.websocket.WebSocketServer  :42   [32m86372297656635392 [0;39m 连接关闭，token：3sIhLoIH6Q，session id：0！当前连接数：0
2021-08-27 16:27:45.115 INFO  com.haoyu.knowlagebase.websocket.WebSocketServer  :42   [32m86372280950722560 [0;39m 连接关闭，token：dp3Bdsqrpt，session id：1！当前连接数：1
2021-08-27 16:27:45.778 INFO  com.haoyu.knowlagebase.websocket.WebSocketServer  :33   [32m86375617150455809 [0;39m 有新连接：token：j3K9mgSogz，session id：2，当前连接数：1
2021-08-27 16:27:45.877 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86376095162699776 [0;39m ------------- 开始 -------------
2021-08-27 16:27:45.878 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86376095162699776 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-08-27 16:27:45.878 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86376095162699776 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.getStatistic
2021-08-27 16:27:45.878 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86376095162699776 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:27:45.878 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86376095162699776 [0;39m 请求参数: []
2021-08-27 16:27:45.879 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86376095162699776 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:27:45.879 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86376095162699776 [0;39m ==> Parameters: 
2021-08-27 16:27:45.880 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86376095162699776 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-08-27 16:27:45.880 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86376095162699776 [0;39m <==        Row: 2021-08-26, 62, 19, 62, 19
2021-08-27 16:27:45.880 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86376095162699776 [0;39m <==        Row: 2021-08-27, 62, 19, 0, 0
2021-08-27 16:27:45.880 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86376095162699776 [0;39m <==      Total: 2
2021-08-27 16:27:45.881 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86376095162699776 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":62,"viewIncrease":62,"voteCount":19,"voteIncrease":19},{"date":1629993600000,"viewCount":62,"viewIncrease":0,"voteCount":19,"voteIncrease":0}],"success":true}
2021-08-27 16:27:45.881 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86376095162699776 [0;39m ------------- 结束 耗时：4 ms -------------
2021-08-27 16:27:45.924 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86376095359832064 [0;39m ------------- 开始 -------------
2021-08-27 16:27:45.924 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86376095359832065 [0;39m ------------- 开始 -------------
2021-08-27 16:27:45.924 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86376095359832064 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:27:45.925 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86376095359832065 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-08-27 16:27:45.925 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86376095359832064 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:27:45.925 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86376095359832065 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.get30Statistic
2021-08-27 16:27:45.925 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86376095359832064 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:27:45.925 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86376095359832065 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:27:45.925 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86376095359832064 [0;39m 请求参数: []
2021-08-27 16:27:45.925 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86376095359832065 [0;39m 请求参数: []
2021-08-27 16:27:45.925 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86376095359832064 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:27:45.925 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86376095359832064 [0;39m ==> Parameters: 
2021-08-27 16:27:45.925 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86376095359832065 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:27:45.926 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86376095359832065 [0;39m ==> Parameters: 
2021-08-27 16:27:45.926 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:27:45.926 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:27:45.926 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86376095359832065 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-08-27 16:27:45.926 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:27:45.926 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86376095359832065 [0;39m <==        Row: 2021-08-26, 62, 19
2021-08-27 16:27:45.927 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:27:45.927 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:27:45.927 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86376095359832065 [0;39m <==      Total: 1
2021-08-27 16:27:45.927 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:27:45.927 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:27:45.927 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86376095359832065 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":0,"viewIncrease":62,"voteCount":0,"voteIncrease":19}],"success":true}
2021-08-27 16:27:45.927 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:27:45.927 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86376095359832065 [0;39m ------------- 结束 耗时：3 ms -------------
2021-08-27 16:27:45.927 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:27:45.927 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:27:45.928 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:27:45.928 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:27:45.928 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:27:45.928 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:27:45.928 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:27:45.929 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:27:45.929 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376095359832064 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:27:45.929 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86376095359832064 [0;39m <==      Total: 16
2021-08-27 16:27:45.930 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86376095359832064 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:27:45.930 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86376095359832064 [0;39m ------------- 结束 耗时：6 ms -------------
2021-08-27 16:27:50.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376112468398080 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:50.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376112468398080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:50.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376112468398080 [0;39m ==> Parameters: 
2021-08-27 16:27:50.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376112468398080 [0;39m <==    Updates: 0
2021-08-27 16:27:50.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376112468398080 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86376122656362496 [0;39m ------------- 开始 -------------
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86376122656362497 [0;39m ------------- 开始 -------------
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86376122656362497 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86376122656362496 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :54   [32m86376122656362498 [0;39m ------------- 开始 -------------
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86376122656362497 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.get30Statistic
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86376122656362496 [0;39m 类名方法: com.haoyu.knowlagebase.controller.EbookSnapshotController.getStatistic
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :55   [32m86376122656362498 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86376122656362497 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:27:52.432 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86376122656362496 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:27:52.433 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :56   [32m86376122656362498 [0;39m 类名方法: com.haoyu.knowlagebase.controller.CategoryController.all
2021-08-27 16:27:52.433 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86376122656362497 [0;39m 请求参数: []
2021-08-27 16:27:52.433 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86376122656362496 [0;39m 请求参数: []
2021-08-27 16:27:52.433 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :57   [32m86376122656362498 [0;39m 远程地址: 127.0.0.1
2021-08-27 16:27:52.433 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :79   [32m86376122656362498 [0;39m 请求参数: []
2021-08-27 16:27:52.433 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86376122656362496 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:27:52.433 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86376122656362497 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2021-08-27 16:27:52.433 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86376122656362498 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2021-08-27 16:27:52.433 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86376122656362497 [0;39m ==> Parameters: 
2021-08-27 16:27:52.433 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86376122656362496 [0;39m ==> Parameters: 
2021-08-27 16:27:52.433 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86376122656362498 [0;39m ==> Parameters: 
2021-08-27 16:27:52.434 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86376122656362497 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2021-08-27 16:27:52.434 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==    Columns: id, parent, name, sort
2021-08-27 16:27:52.434 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86376122656362496 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2021-08-27 16:27:52.434 TRACE c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m86376122656362497 [0;39m <==        Row: 2021-08-26, 62, 19
2021-08-27 16:27:52.434 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 82110017238601728, 100, test2, 1
2021-08-27 16:27:52.434 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86376122656362496 [0;39m <==        Row: 2021-08-26, 62, 19, 62, 19
2021-08-27 16:27:52.435 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 100, 0, 前端开发, 100
2021-08-27 16:27:52.435 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 101, 100, Vue, 101
2021-08-27 16:27:52.435 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 200, 0, Java, 200
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m86376122656362496 [0;39m <==        Row: 2021-08-27, 62, 19, 0, 0
2021-08-27 16:27:52.436 DEBUG c.h.k.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m86376122656362497 [0;39m <==      Total: 1
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 201, 200, 基础应用, 201
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 202, 200, 框架应用, 202
2021-08-27 16:27:52.436 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86376122656362497 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":0,"viewIncrease":62,"voteCount":0,"voteIncrease":19}],"success":true}
2021-08-27 16:27:52.436 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86376122656362497 [0;39m ------------- 结束 耗时：4 ms -------------
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 300, 0, Python, 300
2021-08-27 16:27:52.436 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m86376122656362496 [0;39m <==      Total: 2
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 301, 300, 基础应用, 301
2021-08-27 16:27:52.436 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86376122656362496 [0;39m 返回结果: {"content":[{"date":1629907200000,"viewCount":62,"viewIncrease":62,"voteCount":19,"voteIncrease":19},{"date":1629993600000,"viewCount":62,"viewIncrease":0,"voteCount":19,"voteIncrease":0}],"success":true}
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2021-08-27 16:27:52.436 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86376122656362496 [0;39m ------------- 结束 耗时：4 ms -------------
2021-08-27 16:27:52.436 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 400, 0, 数据库, 400
2021-08-27 16:27:52.437 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 401, 400, MySQL, 401
2021-08-27 16:27:52.437 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 500, 0, 其它, 500
2021-08-27 16:27:52.437 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 501, 500, 服务器, 501
2021-08-27 16:27:52.437 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 502, 500, 开发工具, 502
2021-08-27 16:27:52.438 TRACE c.h.k.mapper.CategoryMapper.selectByExample       :143  [32m86376122656362498 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2021-08-27 16:27:52.438 DEBUG c.h.k.mapper.CategoryMapper.selectByExample       :137  [32m86376122656362498 [0;39m <==      Total: 16
2021-08-27 16:27:52.438 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :91   [32m86376122656362498 [0;39m 返回结果: {"content":[{"id":82110017238601728,"name":"test2","parent":100,"sort":1},{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2021-08-27 16:27:52.438 INFO  com.haoyu.knowlagebase.aspect.LogAspect           :92   [32m86376122656362498 [0;39m ------------- 结束 耗时：6 ms -------------
2021-08-27 16:27:55.001 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376133431529472 [0;39m 生成今日电子书快照开始
2021-08-27 16:27:55.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376133431529472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:27:55.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376133431529472 [0;39m ==> Parameters: 
2021-08-27 16:27:55.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376133431529472 [0;39m <==    Updates: 0
2021-08-27 16:27:55.003 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376133431529472 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:00.007 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376154428215296 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:00.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376154428215296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:00.008 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376154428215296 [0;39m ==> Parameters: 
2021-08-27 16:28:00.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376154428215296 [0;39m <==    Updates: 0
2021-08-27 16:28:00.009 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376154428215296 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:05.003 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86376175382958080 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:28:05.003 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376175382958080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:28:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376175382958080 [0;39m ==> Parameters: 
2021-08-27 16:28:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376175382958080 [0;39m <==    Updates: 5
2021-08-27 16:28:05.004 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86376175382958080 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:28:05.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376175387152384 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:05.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376175387152384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:05.005 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376175387152384 [0;39m ==> Parameters: 
2021-08-27 16:28:05.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376175387152384 [0;39m <==    Updates: 0
2021-08-27 16:28:05.006 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376175387152384 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2021-08-27 16:28:10.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376196383838208 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:10.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376196383838208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:10.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376196383838208 [0;39m ==> Parameters: 
2021-08-27 16:28:10.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376196383838208 [0;39m <==    Updates: 0
2021-08-27 16:28:10.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376196383838208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:15.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376217367941120 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:15.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376217367941120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:15.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376217367941120 [0;39m ==> Parameters: 
2021-08-27 16:28:15.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376217367941120 [0;39m <==    Updates: 0
2021-08-27 16:28:15.015 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376217367941120 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:20.005 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376238305906688 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:20.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376238305906688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:20.006 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376238305906688 [0;39m ==> Parameters: 
2021-08-27 16:28:20.007 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376238305906688 [0;39m <==    Updates: 0
2021-08-27 16:28:20.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376238305906688 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:25.010 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376259298398208 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:25.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376259298398208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:25.010 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376259298398208 [0;39m ==> Parameters: 
2021-08-27 16:28:25.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376259298398208 [0;39m <==    Updates: 0
2021-08-27 16:28:25.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376259298398208 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:30.012 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376280278306816 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:30.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376280278306816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:30.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376280278306816 [0;39m ==> Parameters: 
2021-08-27 16:28:30.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376280278306816 [0;39m <==    Updates: 0
2021-08-27 16:28:30.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376280278306816 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:35.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376301245632512 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:35.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376301245632512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:35.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376301245632512 [0;39m ==> Parameters: 
2021-08-27 16:28:35.013 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376301245632512 [0;39m <==    Updates: 0
2021-08-27 16:28:35.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376301245632512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:35.014 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86376301258215424 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:28:35.014 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376301258215424 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:28:35.014 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376301258215424 [0;39m ==> Parameters: 
2021-08-27 16:28:35.015 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376301258215424 [0;39m <==    Updates: 5
2021-08-27 16:28:35.015 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86376301258215424 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2021-08-27 16:28:40.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376322217152512 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:40.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376322217152512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:40.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376322217152512 [0;39m ==> Parameters: 
2021-08-27 16:28:40.012 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376322217152512 [0;39m <==    Updates: 0
2021-08-27 16:28:40.013 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376322217152512 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:45.000 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376343142535168 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:45.000 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376343142535168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:45.001 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376343142535168 [0;39m ==> Parameters: 
2021-08-27 16:28:45.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376343142535168 [0;39m <==    Updates: 0
2021-08-27 16:28:45.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376343142535168 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:50.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376364172775424 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:50.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376364172775424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:50.015 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376364172775424 [0;39m ==> Parameters: 
2021-08-27 16:28:50.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376364172775424 [0;39m <==    Updates: 0
2021-08-27 16:28:50.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376364172775424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:28:55.014 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376385144295424 [0;39m 生成今日电子书快照开始
2021-08-27 16:28:55.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376385144295424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:28:55.014 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376385144295424 [0;39m ==> Parameters: 
2021-08-27 16:28:55.016 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376385144295424 [0;39m <==    Updates: 0
2021-08-27 16:28:55.016 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376385144295424 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:29:00.008 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376406090649600 [0;39m 生成今日电子书快照开始
2021-08-27 16:29:00.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376406090649600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:29:00.009 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376406090649600 [0;39m ==> Parameters: 
2021-08-27 16:29:00.011 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376406090649600 [0;39m <==    Updates: 0
2021-08-27 16:29:00.011 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376406090649600 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2021-08-27 16:29:05.002 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :32   [32m86376427037003776 [0;39m 生成今日电子书快照开始
2021-08-27 16:29:05.002 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376427037003776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2021-08-27 16:29:05.003 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376427037003776 [0;39m ==> Parameters: 
2021-08-27 16:29:05.004 DEBUG c.h.k.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m86376427037003776 [0;39m <==    Updates: 0
2021-08-27 16:29:05.004 INFO  com.haoyu.knowlagebase.job.EbookSnapshotJob       :35   [32m86376427037003776 [0;39m 生成今日电子书快照结束，耗时：2毫秒
2021-08-27 16:29:05.004 INFO  com.haoyu.knowlagebase.job.DocJob                 :33   [32m86376427045392384 [0;39m 更新电子书下的文档数据开始
2021-08-27 16:29:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376427045392384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2021-08-27 16:29:05.004 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376427045392384 [0;39m ==> Parameters: 
2021-08-27 16:29:05.005 DEBUG c.h.k.mapper.DocMapperCust.updateEbookInfo        :137  [32m86376427045392384 [0;39m <==    Updates: 5
2021-08-27 16:29:05.005 INFO  com.haoyu.knowlagebase.job.DocJob                 :36   [32m86376427045392384 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
